{"remainingRequest":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\alienware\\Desktop\\MyProject\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alienware\\Desktop\\MyProject\\vue_app_00\\src\\components\\tabbar\\HomeShopCart.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_app_00\\src\\components\\tabbar\\HomeShopCart.vue","mtime":1540743388925},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1540554614000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\alienware\\\\Desktop\\\\MyProject\\\\vue_app_00\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Qs from \"qs\";\nimport { Toast } from \"mint-ui\";\nimport { MessageBox } from \"mint-ui\";\nexport default {\n  inject: ['reload'],\n  data: function data() {\n    return {\n      products_res: \"\",\n      res_msg: \"\",\n      ifshow: false,\n      //当前提示消息是否显示\n      uname: \"\",\n      num: ''\n    };\n  },\n  methods: {\n    //跳转到当前产品的详情页\n    goDetails: function goDetails(tid) {\n      this.$router.push(\"/product_details/\".concat(tid));\n    },\n    del: function del(tid, index) {\n      var _this = this;\n\n      MessageBox.confirm(\"确定要删除这个商品吗?\").then(function () {\n        _this.$axios.post(\"/collection/delete\", Qs.stringify({\n          tid: tid\n        })).then(function (res) {\n          if (res.data.code == 1) {\n            var msg = res.data.msg;\n            Toast({\n              message: msg,\n              duration: 1500\n            });\n          } else {\n            Toast({\n              message: res.data.msg,\n              duration: 1500\n            });\n          }\n\n          _this.reload();\n        });\n      }).catch(function (v) {\n        console.info(v);\n      });\n    }\n  },\n  computed: {// total() {\n    //   return this.list.reduce((prev, p, i, arr) => {\n    //     return prev + p.price * p.count;\n    //   }, 0);\n    // }\n  },\n  created: function created() {\n    (function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(self) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return self.$axios.get(\"/users/islogin\");\n\n              case 2:\n                res = _context.sent;\n\n                if (res.data.ok == 1) {\n                  self.isLogin = true;\n                  self.uname = res.data.uname;\n                  self.uid = res.data.uid;\n                } else {\n                  self.isLogin = false;\n                } //2.查询当前用户的购物车\n\n\n                _context.next = 6;\n                return self.$axios.get(\"/collection/searchlist?uname=\".concat(self.uname));\n\n              case 6:\n                res = _context.sent;\n                self.products_res = res.data.data;\n                console.log(self.products.length);\n\n                if (res.data.code == -1) {\n                  self.ifshow = true;\n                  self.res_msg = res.data.msg;\n                } else {\n                  self.ifshow = false;\n                }\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    })()(this);\n  }\n};",{"version":3,"sources":["HomeShopCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAA,EAAA,MAAA,IAAA;AACA,SACA,KADA,QAEA,SAFA;AAGA,SACA,UADA,QAEA,SAFA;AAGA,eAAA;AACA,UAAA,CAAA,QAAA,CADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,oBAAA,EADA;AAEA,eAAA,EAFA;AAGA,cAAA,KAHA;AAGA;AACA,aAAA,EAJA;AAKA,WAAA;AALA,KAAA;AAOA,GAVA;AAWA,WAAA;AACA;AACA,aAFA,qBAEA,GAFA,EAEA;AACA,WAAA,OAAA,CAAA,IAAA,4BAAA,GAAA;AACA,KAJA;AAKA,OALA,eAKA,GALA,EAKA,KALA,EAKA;AAAA;;AACA,iBAAA,OAAA,CAAA,aAAA,EAAA,IAAA,CAAA,YAAA;AACA,cAAA,MAAA,CAAA,IAAA,CAAA,oBAAA,EAAA,GAAA,SAAA,CAAA;AACA;AADA,SAAA,CAAA,EAEA,IAFA,CAEA,eAAA;AACA,cAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA,IAAA,IAAA,CAAA,GAAA;AACA,kBAAA;AACA,uBAAA,GADA;AAEA,wBAAA;AAFA,aAAA;AAIA,WANA,MAMA;AACA,kBAAA;AACA,uBAAA,IAAA,IAAA,CAAA,GADA;AAEA,wBAAA;AAFA,aAAA;AAIA;;AACA,gBAAA,MAAA;AACA,SAhBA;AAiBA,OAlBA,EAkBA,KAlBA,CAkBA,aAAA;AACA,gBAAA,IAAA,CAAA,CAAA;AACA,OApBA;AAqBA;AA3BA,GAXA;AAwCA,YAAA,CACA;AACA;AACA;AACA;AACA;AALA,GAxCA;AA+CA,SA/CA,qBA+CA;AACA;AAAA;AAAA;AAAA,8BAAA,iBAAA,IAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,MAAA,CAAA,GAAA,CAAA,gBAAA,CAFA;;AAAA;AAEA,mBAFA;;AAGA,oBAAA,IAAA,IAAA,CAAA,EAAA,IAAA,CAAA,EAAA;AACA,uBAAA,OAAA,GAAA,IAAA;AACA,uBAAA,KAAA,GAAA,IAAA,IAAA,CAAA,KAAA;AACA,uBAAA,GAAA,GAAA,IAAA,IAAA,CAAA,GAAA;AACA,iBAJA,MAIA;AACA,uBAAA,OAAA,GAAA,KAAA;AACA,iBATA,CAUA;;;AAVA;AAAA,uBAWA,KAAA,MAAA,CAAA,GAAA,wCAAA,KAAA,KAAA,EAXA;;AAAA;AAWA,mBAXA;AAYA,qBAAA,YAAA,GAAA,IAAA,IAAA,CAAA,IAAA;AACA,wBAAA,GAAA,CAAA,KAAA,QAAA,CAAA,MAAA;;AACA,oBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,CAAA,EAAA;AACA,uBAAA,MAAA,GAAA,IAAA;AACA,uBAAA,OAAA,GAAA,IAAA,IAAA,CAAA,GAAA;AACA,iBAHA,MAGA;AACA,uBAAA,MAAA,GAAA,KAAA;AACA;;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;AAAA,SAoBA,IApBA;AAqBA;AArEA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"mui-card\">\n      <div class=\"mui-card-header\" v-for=\"(item,i) in products_res\" :key=\"i\">\n        <div class=\"cart_info\">\n          <div>\n            <h5>{{item.title}}</h5>\n            <h6 class=\"price\">{{item.price}}</h6>\n             <mt-button size=\"small\" type=\"danger\" @click=\"del(item.tid,i)\" style=\"margin-left:75%;\">删除</mt-button>\n          </div>\n       \n          <div class=\"img_container\">\n            <img :src=\"item.md_pic\">\n          </div>\n        </div>\n      </div>\n      <div class=\"mui-card-footer\"><span>总共有{{num}}件</span> </div>\n\n    </div>\n  </div>\n</template>\n<script>\n  import Qs from \"qs\";\n  import {\n    Toast\n  } from \"mint-ui\";\n  import {\n    MessageBox\n  } from \"mint-ui\";\n  export default {\n    inject: ['reload'],\n    data() {\n      return {\n        products_res: \"\",\n        res_msg: \"\",\n        ifshow: false, //当前提示消息是否显示\n        uname: \"\",\n        num: ''\n      };\n    },\n    methods: {\n      //跳转到当前产品的详情页\n      goDetails(tid) {\n        this.$router.push(`/product_details/${tid}`);\n      },\n      del(tid, index) {\n        MessageBox.confirm(\"确定要删除这个商品吗?\").then(() => {\n          this.$axios.post(\"/collection/delete\", Qs.stringify({\n            tid\n          })).then(res => {\n            if (res.data.code == 1) {\n              var msg = res.data.msg;\n              Toast({\n                message: msg,\n                duration: 1500\n              })\n            } else {\n              Toast({\n                message: res.data.msg,\n                duration: 1500\n              })\n            }\n            this.reload();\n          })\n        }).catch(v => {\n          console.info(v);\n        })\n      }\n    },\n    computed: {\n      // total() {\n      //   return this.list.reduce((prev, p, i, arr) => {\n      //     return prev + p.price * p.count;\n      //   }, 0);\n      // }\n    },\n    created() {\n      (async function (self) {\n        //1.判断用户是否登录\n         var res = await self.$axios.get(\"/users/islogin\")\n        if (res.data.ok == 1) {\n          self.isLogin = true;\n          self.uname = res.data.uname;\n          self.uid = res.data.uid;\n        } else {\n          self.isLogin = false;\n        }\n        //2.查询当前用户的购物车\n        var res = await self.$axios.get(`/collection/searchlist?uname=${self.uname}`)\n          self.products_res = res.data.data;\n          console.log(self.products.length)\n          if (res.data.code == -1) {\n            self.ifshow = true;\n            self.res_msg = res.data.msg;\n          } else {\n            self.ifshow = false;\n          }\n      })(this)\n    }\n  };\n</script>\n<style scoped>\n  .cart_info {\n    width: 355px;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  .cart_info .price {\n    color: #ff7363;\n    font-weight: 600;\n  }\n\n  .img_container{\n     width:190px;\n     height:80px;\n  }\n  .img_container img{\n    width:100%;\n    height:80px;\n  }\n</style>"],"sourceRoot":"src\\components\\tabbar"}]}