{"remainingRequest":"C:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\user\\register.vue?vue&type=style&index=0&id=08370f20&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\user\\register.vue","mtime":1540734037314},{"path":"C:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1540554614000},{"path":"C:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\postcss-loader\\lib\\index.js","mtime":1540554614000},{"path":"C:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"C:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1540554614000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.register-container {\n    background-image: linear-gradient(180deg, #08B27F, #16B76A);\n    text-align: center;\n    position: relative;\n    min-height: 667px;\n}\n\n.register-container div:first-child {\n    list-style: none;\n    position: absolute;\n    left: 10%;\n    top: 5%;\n    width: 80%;\n    text-align: left;\n    margin-top: 5%;\n}\n\n[type=\"phone\"] {\n    margin-bottom: 5%;\n}\n\n#vify {\n    width: 110px;\n    height: 60px;\n    position: absolute;\n    top: 21%;\n    right: -6%;\n}\n\ninput {\n    width: 100%;\n    height: 40px;\n    border-radius: 4px;\n    padding-left: 14px;\n    background: hsla(0, 0%, 100%, .2) !important;\n    z-index: 99;\n    color: #f5f5f5 !important;\n    font-size: 13px;\n    outline: 0;\n}\n\n.my_input {\n    width: 60%;\n}\n",{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"register.vue","sourceRoot":"src\\components\\user","sourcesContent":["<template>\r\n    <div>\r\n        <mt-header fixed title=\"注册\" style=\"background:#00A076\">\r\n            <router-link to=\"/\" slot=\"left\">\r\n                <mt-button icon=\"back\">返回</mt-button>\r\n            </router-link>\r\n        </mt-header>\r\n        <div class=\"register-container\">\r\n            <div>\r\n                <input type=\"phone\" placeholder=\"请输入手机号码\" v-model=\"phone\">\r\n                <canvas id=\"vify\" @click=\"changeCode()\"></canvas>\r\n                <input type=\"text\" placeholder=\"请输入验证码\" class=\"my_input\" v-model=\"v_code\">\r\n                <span style=\"color:#fff\">{{v_code_text}}</span>\r\n                <input type=\"text\" placeholder=\"请输入用户名\" class=\"my_input\" v-model=\"uname\" @blur.prevent=\"blur_uname\">\r\n                <span style=\"font-size:10px;color:#fff\">{{isuname}}</span>\r\n                <input type=\"password\" placeholder=\"请输入密码\" class=\"my_input\" v-model=\"upwd\">\r\n                <mt-button type=\"default\" size=\"large\" @click=\"submit()\">立即注册</mt-button>\r\n                <span style=\"font-size:12px\">已有账号? <span style=\"text-decoration:underline\" @click=\"gologin()\">立即登录</span></span>\r\n                <mt-button style=\"margin-top:10px;\" type=\"default\" size=\"large\" @click=\"gologin()\" v-if=\"orLogin\">立即登录</mt-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import Qs from \"qs\"\r\n    import {\r\n        MessageBox\r\n    } from 'mint-ui';\r\n    export default {\r\n        data() {\r\n            return {\r\n                v_code: \"\",\r\n                v_code_num: \"\", //当前动态生成的验证码\r\n                v_code_text: \"\",\r\n                uname: \"\",\r\n                upwd: \"\",\r\n                phone: \"\",\r\n                isuname: \"\",\r\n                orLogin: false, //是否显示登录\r\n                res: \"\", //注册结果\r\n            }\r\n        },\r\n        methods: {\r\n            //返回指定范围随机数\r\n            rn(min, max) {\r\n                var n = parseInt(Math.random() * (max - min) + min);\r\n                return n;\r\n            },\r\n            //返回指定范围颜色\r\n            rc(mix, max) {\r\n                var r = this.rn(mix, max);\r\n                var g = this.rn(mix, max);\r\n                var b = this.rn(mix, max);\r\n                return `rgb(${r},${g},${b})`;\r\n            },\r\n            //生成验证码码\r\n            vify_code() {\r\n                var vify = document.getElementById(\"vify\");\r\n                var ctx = vify.getContext(\"2d\");\r\n                ctx.fillStyle = \"#fff\";\r\n                ctx.fillRect(0, 0, 320, 100);\r\n                //创建4个字符\r\n                var pool = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789\";\r\n                for (var i = 0; i < 4; i++) {\r\n                    var c = pool[this.rn(0, pool.length)];\r\n                    ctx.textBaseline = \"top\";\r\n                    ctx.font = \"100px SimHei\";\r\n                    ctx.fillStyle = this.rc(80, 180);\r\n                    ctx.fillText(c, i * 70, 4);\r\n                    // console.log(c)\r\n                    this.v_code_num += c;\r\n                }\r\n                //创建六条干扰线\r\n                for (var i = 0; i < 6; i++) {\r\n                    ctx.beginPath();\r\n                    ctx.strokeStyle = this.rc(0, 255);\r\n                    ctx.moveTo(this.rn(0, 280), this.rn(0, 80));\r\n                    ctx.lineTo(this.rn(0, 280), this.rn(0, 80));\r\n                    ctx.stroke();\r\n                }\r\n                //创建30个干扰点\r\n                for (var i = 0; i < 60; i++) {\r\n                    ctx.beginPath();\r\n                    ctx.fillStyle = this.rc(0, 255);\r\n                    ctx.arc(this.rn(0, 280), this.rn(0, 80), 3, 0, 2 * Math.PI);\r\n                    ctx.fill();\r\n                }\r\n\r\n            },\r\n            changeCode() {\r\n                this.v_code_num = [];\r\n                this.vify_code();\r\n            },\r\n            //用户名注册的时候失去焦点事件\r\n            blur_uname() {\r\n                this.$http.get(`users/verify?uname=${this.uname}`).then(res => {\r\n                    this.isuname = res.data;\r\n                    if (this.isuname.code == 1) {\r\n                        this.isuname = \"√\"\r\n                    } else {\r\n                        this.isuname = \"用户名已存在\"\r\n                    }\r\n                })\r\n            },\r\n            //注册\r\n            submit() {\r\n                console.log(this.uname)\r\n                this.$axios.post(\"users/register_phone\",\r\n                    Qs.stringify({\r\n                        uname: this.uname,\r\n                        upwd: this.upwd,\r\n                        phone: this.phone,\r\n                    })\r\n                ).then(res => {\r\n                    this.res = res.data;\r\n                    console.log(res.data)\r\n                    if (this.res.code == 1) {\r\n                        this.orLogin = true;\r\n                    } else {\r\n                        this.orLogin = false;\r\n                    }\r\n                    MessageBox({\r\n                        title: \"提示\",\r\n                        message: res.data.msg,\r\n                    })\r\n                })\r\n            },\r\n            //登录\r\n            gologin() {\r\n                this.$router.push({\r\n                    path: \"/home/users/login\"\r\n                })\r\n            }\r\n        },\r\n        mounted() {\r\n            this.vify_code()\r\n        },\r\n        watch: {\r\n            v_code() {\r\n                if (this.v_code == this.v_code_num) {\r\n                    this.v_code_text = \"√\";\r\n                } else {\r\n                    this.v_code_text = \"x\";\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    .register-container {\r\n        background-image: linear-gradient(180deg, #08B27F, #16B76A);\r\n        text-align: center;\r\n        position: relative;\r\n        min-height: 667px;\r\n    }\r\n\r\n    .register-container div:first-child {\r\n        list-style: none;\r\n        position: absolute;\r\n        left: 10%;\r\n        top: 5%;\r\n        width: 80%;\r\n        text-align: left;\r\n        margin-top: 5%;\r\n    }\r\n\r\n    [type=\"phone\"] {\r\n        margin-bottom: 5%;\r\n    }\r\n\r\n    #vify {\r\n        width: 110px;\r\n        height: 60px;\r\n        position: absolute;\r\n        top: 21%;\r\n        right: -6%;\r\n    }\r\n\r\n    input {\r\n        width: 100%;\r\n        height: 40px;\r\n        border-radius: 4px;\r\n        padding-left: 14px;\r\n        background: hsla(0, 0%, 100%, .2) !important;\r\n        z-index: 99;\r\n        color: #f5f5f5 !important;\r\n        font-size: 13px;\r\n        outline: 0;\r\n    }\r\n\r\n    .my_input {\r\n        width: 60%;\r\n    }\r\n</style>"]}]}