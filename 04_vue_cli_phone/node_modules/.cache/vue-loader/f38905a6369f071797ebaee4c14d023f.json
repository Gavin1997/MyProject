{"remainingRequest":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\tabbar\\HomeShopCart.vue?vue&type=style&index=0&id=24c4d118&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\tabbar\\HomeShopCart.vue","mtime":1541946696507},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\postcss-loader\\lib\\index.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1540554614000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.cart_info {\n  width: 355px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.cart_info .price {\n  color: #ff7363;\n  font-weight: 600;\n}\n\n.img_container{\n   width:190px;\n   height:80px;\n}\n.img_container img{\n  width:100%;\n  height:80px;\n}\n",{"version":3,"sources":["HomeShopCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HomeShopCart.vue","sourceRoot":"src\\components\\tabbar","sourcesContent":["<template>\n  <div>\n    <div class=\"mui-card\">\n      <div class=\"mui-card-header\" v-for=\"(item,i) in products_res\" :key=\"i\" @click=\"goDetails(item.tid)\">\n        <div class=\"cart_info\">\n          <div style=\"height:88px;\">\n            <h5>{{item.title |ellipse(40)}}</h5>\n            <h6 class=\"price\">{{item.price}}</h6>\n             <mt-button size=\"small\" type=\"danger\" @click=\"del(item.tid,i)\" style=\"margin-left:75%;\">删除</mt-button>\n          </div>\n       \n          <div class=\"img_container\">\n            <img v-lazy=\"item.md_pic\" style=\"width:108px;\">\n          </div>\n        </div>\n      </div>\n      <div class=\"mui-card-footer\"><span>总共有{{num}}件</span> </div>\n      <div class=\"mui-card-footer\" v-if=\"isLogin_show\"><span style=\"font-size:15px;font-weight:600\">当前还没有登录,请登录后再看您的宝贝哦,点击下方按钮登录!!</span> \n      </div>\n      <mt-button v-if=\"isLogin_show\" type=\"primary\" size=\"large\" @click=\"goLogin()\">登录</mt-button>\n    </div>\n  </div>\n</template>\n<script>\n  import Qs from \"qs\";\n  import {\n    Toast\n  } from \"mint-ui\";\n  import {\n    MessageBox\n  } from \"mint-ui\";\n  export default {\n    inject: ['reload'],\n    data() {\n      return {\n        products_res: \"\",\n        res_msg: \"\",\n        ifshow: false, //当前提示消息是否显示\n        uname: \"\",\n        num: '',\n        isLogin_show:true //当前是否登录\n      };\n    },\n    methods: {\n      //跳转到当前产品的详情页\n      goDetails(tid) {\n        this.$router.push(`/home/goodsinfo/${tid}`);\n      },\n      del(tid, index) {\n        MessageBox.confirm(\"确定要删除这个商品吗?\").then(() => {\n          this.$axios.post(\"/collection/delete\", Qs.stringify({\n            tid\n          })).then(res => {\n            if (res.data.code == 1) {\n              var msg = res.data.msg;\n              Toast({\n                message: msg,\n                duration: 1500\n              })\n            } else {\n              Toast({\n                message: res.data.msg,\n                duration: 1500\n              })\n            }\n            //更新页面的状态\n            this.$store.dispatch(\"saveForm\")\n            this.reload();\n          })\n        }).catch(v => {\n          console.info(v);\n        })\n      },\n      //跳转登录页面\n      goLogin() {\n        this.$router.push({\n          path:\"/home/users/login\",\n          query:{redirect:\"/home/shopcart\"}\n        })\n      }\n    },\n    computed: {\n    },\n    created() {\n      (async function (self) {\n        //1.判断用户是否登录\n         var res = await self.$axios.get(\"/users/islogin\")\n        if (res.data.ok == 1) {\n          self.isLogin = true;\n          self.uname = res.data.uname;\n          self.uid = res.data.uid;\n          //关闭未登录的提示\n          self.isLogin_show = false;\n        } else {\n          self.isLogin = false;\n        }\n        //2.查询当前用户的购物车\n        var res = await self.$axios.get(`/collection/searchlist?uname=${self.uname}`)\n          self.products_res = res.data.data;\n         self.num = self.products_res.length;\n          if (res.data.code == -1) {\n            self.ifshow = true;\n            self.res_msg = res.data.msg;\n          } else {\n            self.ifshow = false;\n          }\n      })(this)\n    }\n  };\n</script>\n<style scoped>\n  .cart_info {\n    width: 355px;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  .cart_info .price {\n    color: #ff7363;\n    font-weight: 600;\n  }\n\n  .img_container{\n     width:190px;\n     height:80px;\n  }\n  .img_container img{\n    width:100%;\n    height:80px;\n  }\n</style>"]}]}