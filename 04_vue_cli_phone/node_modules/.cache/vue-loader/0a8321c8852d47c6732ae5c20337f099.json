{"remainingRequest":"c:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\subcomponents\\comment.vue?vue&type=style&index=0&id=13c527d2&scoped=true&lang=css","dependencies":[{"path":"c:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\subcomponents\\comment.vue","mtime":1540829307383},{"path":"c:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1540554614000},{"path":"c:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\postcss-loader\\lib\\index.js","mtime":1540554614000},{"path":"c:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"c:\\Users\\web\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1540554614000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.app_subcomment div .textarea {\n  font-size: 10px !important;\n  color: black !important;\n  border-radius: 12px;\n  scrollbar-arrow-color: yellow;\n  scrollbar-base-color: lightsalmon;\n  overflow: hidden;\n  color: #666464;\n  height: auto;\n  margin: 0;\n}\n\n.app_subcomment div.comment {\n  position: relative;\n}\n\n.app_subcomment div.comment ul {\n  list-style: none;\n  padding: 0;\n}\n\n.app_subcomment div.comment ul li {\n  display: flex;\n  justify-content: space-around;\n  width: 100%;\n  border: 1px solid #6464;\n  border-radius: 5px;\n  background: #fff;\n  height: auto;\n  text-align: center;\n  margin-top: 2px;\n\n}\n\n.app_subcomment div.comment ul li span {\n  display: inline-block;\n  padding: 5px;\n  font-size: 12px;\n}\n\n.app_subcomment div.comment ul li span:first-child {\n  background-color: #eee;\n}\n",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"comment.vue","sourceRoot":"src\\components\\subcomponents","sourcesContent":["<template>\n  <div class=\"app_subcomment\">\n    <div>\n      <textarea class=\"textarea\" placeholder=\"请输入评论的内容(最多吐槽120字)\" maxlength=\"120\" v-model=\"msg\"></textarea>\n      <mt-button type=\"primary\" size=\"large\" class=\"button\" @click.native=\"submitMsg()\">点击发表评论</mt-button>\n    </div>\n    <!-- 评论区 -->\n    <div class=\"comment\">\n      <ul>\n        <li v-for=\"(item,i) in list\" :key=\"i\">\n          <span>第{{i+1}}楼</span>\n          <span>{{item.content | ellipse(123)}}</span>\n          <span>{{item.username}}</span>\n          <span>{{item.ctime | dateFormat}}</span>\n          <p>\n            <mt-button type=\"danger\" size=\"small\" @click.native=\"delMsg(item.id)\">删除</mt-button>\n          </p>\n        </li>\n      </ul>\n    </div>\n    <mt-button type=\"primary\" size=\"large\" @click=\"getMore()\">加载更多....</mt-button>\n  </div>\n</template>\n<script>\n  import {\n    Toast\n  } from \"mint-ui\";\n  import Qs from \"qs\";\n  import { MessageBox} from \"mint-ui\";\n  export default {\n    inject:['reload'],\n    data() {\n      return {\n        list: [],\n        pageIndex: 0, //当前显示页码\n        msg: \"\"\n      };\n    },\n    methods: {\n      submitMsg() {\n        //  console.log(this.list)\n        var username = \"匿名用户\";\n        var nid = this.id; //新闻编号\n        var content = this.msg; //双想绑定留言的内容\n        var url = \"newslist/saveComment\";\n        var obj = {\n          nid,\n          content,\n          username\n        };\n        this.$axios.post(url, Qs.stringify(obj)).then(result => {\n          // console.log(result);\n          if (result.data.code == 1) {\n            this.msg = \"\";\n            Toast(result.data.msg);\n            this.pageIndex = 0;\n            this.list = [];\n            this.getMore();\n          } else if(result.data.code == -1){\n            var msg = result.data.msg;\n            Toast({\n              message: msg,\n              duration: 1200\n            });\n          }else{\n            Toast({\n              message:result.data.msg,\n              duration:1500\n            })\n          }\n        });\n\n        //  this.list.unshift({content:this.str,id:1,username:\"weigong\",citme:new Date().toLocaleString()})\n      },\n      getMore() {\n        this.pageIndex++; //页码加一\n        this.$axios\n          .get(\"newslist/commentlist?nid=\" + this.id + \"&pno=\" + this.pageIndex)\n          .then(res => {\n            this.list = this.list.concat(res.data.data);\n            var len = res.data.data + res.data.pageSize;\n            if (this.list.length > len) {\n              // console.log(len+res.data.data.length)\n              Toast({\n                message: \"没有更多了\",\n                duration: 800\n              });\n            }\n          });\n      },\n      delMsg(id){\n        MessageBox.confirm(\"确定要删除这条评论吗?\").then(()=>{\n          this.$axios.get(\"newslist/delComment?id=\"+id).then(res=>{\n              if(res.data.code==1){\n                Toast({\n                  message:res.data.msg,\n                  duartion:1000\n                })\n              }else{\n                Toast({\n                  message:res.data.msg,\n                  duartion:1000\n                })\n              }\n               this.reload();\n          })\n        }).catch(v=>{\n          console.info(v)\n        })\n      \n      }\n     \n    },\n    watch: {},\n    created() {\n      this.getMore();\n    },\n    props: [\"id\"] //接受父组件的传递参数\n  };\n</script>\n<style scoped>\n  .app_subcomment div .textarea {\n    font-size: 10px !important;\n    color: black !important;\n    border-radius: 12px;\n    scrollbar-arrow-color: yellow;\n    scrollbar-base-color: lightsalmon;\n    overflow: hidden;\n    color: #666464;\n    height: auto;\n    margin: 0;\n  }\n\n  .app_subcomment div.comment {\n    position: relative;\n  }\n\n  .app_subcomment div.comment ul {\n    list-style: none;\n    padding: 0;\n  }\n\n  .app_subcomment div.comment ul li {\n    display: flex;\n    justify-content: space-around;\n    width: 100%;\n    border: 1px solid #6464;\n    border-radius: 5px;\n    background: #fff;\n    height: auto;\n    text-align: center;\n    margin-top: 2px;\n\n  }\n\n  .app_subcomment div.comment ul li span {\n    display: inline-block;\n    padding: 5px;\n    font-size: 12px;\n  }\n\n  .app_subcomment div.comment ul li span:first-child {\n    background-color: #eee;\n  }\n</style>"]}]}