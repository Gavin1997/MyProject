{"remainingRequest":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\src\\components\\user\\register.vue?vue&type=style&index=0&id=7d3a339b&scoped=true&lang=css","dependencies":[{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\src\\components\\user\\register.vue","mtime":1542103156000},{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\css-loader\\index.js","mtime":1542103156000},{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1542103156000},{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\postcss-loader\\lib\\index.js","mtime":1542103156000},{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1542103156000},{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1542103156000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.register-container {\n    background-image: linear-gradient(180deg, #08B27F, #16B76A);\n    text-align: center;\n    position: relative;\n    min-height: 667px;\n}\n\n.register-container div:first-child {\n    list-style: none;\n    position: absolute;\n    left: 10%;\n    top: 5%;\n    width: 80%;\n    text-align: left;\n    margin-top: 5%;\n}\n\n[type=\"phone\"] {\n    margin-bottom: 5%;\n}\n\n#vify {\n    width: 110px;\n    height: 60px;\n    position: absolute;\n    top: 21%;\n    right: -6%;\n}\n\ninput {\n    width: 100%;\n    height: 40px;\n    border-radius: 4px;\n    padding-left: 14px;\n    background: hsla(0, 0%, 100%, .2) !important;\n    z-index: 99;\n    color: #f5f5f5 !important;\n    font-size: 13px;\n    outline: 0;\n}\n\n.my_input {\n    width: 60%;\n}\n",{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"register.vue","sourceRoot":"src\\components\\user","sourcesContent":["<template>\n    <div>\n        <mt-header fixed title=\"注册\" style=\"background:#00A076\">\n            <router-link to=\"/\" slot=\"left\">\n                <mt-button icon=\"back\">返回</mt-button>\n            </router-link>\n        </mt-header>\n        <div class=\"register-container\">\n            <div>\n                <input type=\"phone\" placeholder=\"请输入手机号码\" v-model=\"phone\">\n                <canvas id=\"vify\" @click=\"changeCode()\"></canvas>\n                <input type=\"text\" placeholder=\"请输入验证码\" class=\"my_input\" v-model=\"v_code\">\n                <span style=\"color:#fff\">{{v_code_text}}</span>\n                <input type=\"text\" placeholder=\"请输入用户名\" class=\"my_input\" v-model=\"uname\" @blur.prevent=\"blur_uname\">\n                <span style=\"font-size:10px;color:#fff\">{{isuname}}</span>\n                <input type=\"password\" placeholder=\"请输入密码\" class=\"my_input\" v-model=\"upwd\">\n                <mt-button type=\"default\" size=\"large\" @click=\"submit()\">立即注册</mt-button>\n                <span style=\"font-size:12px\">已有账号? <span style=\"text-decoration:underline\" @click=\"gologin()\">立即登录</span></span>\n                <mt-button style=\"margin-top:10px;\" type=\"default\" size=\"large\" @click=\"gologin()\" v-if=\"orLogin\">立即登录</mt-button>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import Qs from \"qs\"\n    import {\n        MessageBox\n    } from 'mint-ui';\n    export default {\n        data() {\n            return {\n                v_code: \"\",\n                v_code_num: \"\", //当前动态生成的验证码\n                v_code_text: \"\",\n                uname: \"\",\n                upwd: \"\",\n                phone: \"\",\n                isuname: \"\",\n                orLogin: false, //是否显示登录\n                res: \"\", //注册结果\n            }\n        },\n        methods: {\n            //返回指定范围随机数\n            rn(min, max) {\n                var n = parseInt(Math.random() * (max - min) + min);\n                return n;\n            },\n            //返回指定范围颜色\n            rc(mix, max) {\n                var r = this.rn(mix, max);\n                var g = this.rn(mix, max);\n                var b = this.rn(mix, max);\n                return `rgb(${r},${g},${b})`;\n            },\n            //生成验证码码\n            vify_code() {\n                var vify = document.getElementById(\"vify\");\n                var ctx = vify.getContext(\"2d\");\n                ctx.fillStyle = \"#fff\";\n                ctx.fillRect(0, 0, 320, 100);\n                //创建4个字符\n                var pool = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789\";\n                for (var i = 0; i < 4; i++) {\n                    var c = pool[this.rn(0, pool.length)];\n                    ctx.textBaseline = \"top\";\n                    ctx.font = \"100px SimHei\";\n                    ctx.fillStyle = this.rc(80, 180);\n                    ctx.fillText(c, i * 70, 4);\n                    // console.log(c)\n                    this.v_code_num += c;\n                }\n                //创建六条干扰线\n                for (var i = 0; i < 6; i++) {\n                    ctx.beginPath();\n                    ctx.strokeStyle = this.rc(0, 255);\n                    ctx.moveTo(this.rn(0, 280), this.rn(0, 80));\n                    ctx.lineTo(this.rn(0, 280), this.rn(0, 80));\n                    ctx.stroke();\n                }\n                //创建30个干扰点\n                for (var i = 0; i < 60; i++) {\n                    ctx.beginPath();\n                    ctx.fillStyle = this.rc(0, 255);\n                    ctx.arc(this.rn(0, 280), this.rn(0, 80), 3, 0, 2 * Math.PI);\n                    ctx.fill();\n                }\n\n            },\n            changeCode() {\n                this.v_code_num = [];\n                this.vify_code();\n            },\n            //用户名注册的时候失去焦点事件\n            blur_uname() {\n                this.$http.get(`users/verify?uname=${this.uname}`).then(res => {\n                    this.isuname = res.data;\n                    if (this.isuname.code == 1) {\n                        this.isuname = \"√\"\n                    } else {\n                        this.isuname = \"用户名已存在\"\n                    }\n                })\n            },\n            //注册\n            submit() {\n                console.log(this.uname)\n                this.$axios.post(\"users/register_phone\",\n                    Qs.stringify({\n                        uname: this.uname,\n                        upwd: this.upwd,\n                        phone: this.phone,\n                    })\n                ).then(res => {\n                    this.res = res.data;\n                    console.log(res.data)\n                    if (this.res.code == 1) {\n                        this.orLogin = true;\n                    } else {\n                        this.orLogin = false;\n                    }\n                    MessageBox({\n                        title: \"提示\",\n                        message: res.data.msg,\n                    })\n                })\n            },\n            //登录\n            gologin() {\n                this.$router.push({\n                    path: \"/home/users/login\"\n                })\n            }\n        },\n        mounted() {\n            this.vify_code()\n        },\n        watch: {\n            v_code() {\n                if (this.v_code == this.v_code_num) {\n                    this.v_code_text = \"√\";\n                } else {\n                    this.v_code_text = \"x\";\n                }\n            },\n        }\n    }\n</script>\n<style scoped>\n    .register-container {\n        background-image: linear-gradient(180deg, #08B27F, #16B76A);\n        text-align: center;\n        position: relative;\n        min-height: 667px;\n    }\n\n    .register-container div:first-child {\n        list-style: none;\n        position: absolute;\n        left: 10%;\n        top: 5%;\n        width: 80%;\n        text-align: left;\n        margin-top: 5%;\n    }\n\n    [type=\"phone\"] {\n        margin-bottom: 5%;\n    }\n\n    #vify {\n        width: 110px;\n        height: 60px;\n        position: absolute;\n        top: 21%;\n        right: -6%;\n    }\n\n    input {\n        width: 100%;\n        height: 40px;\n        border-radius: 4px;\n        padding-left: 14px;\n        background: hsla(0, 0%, 100%, .2) !important;\n        z-index: 99;\n        color: #f5f5f5 !important;\n        font-size: 13px;\n        outline: 0;\n    }\n\n    .my_input {\n        width: 60%;\n    }\n</style>"]}]}