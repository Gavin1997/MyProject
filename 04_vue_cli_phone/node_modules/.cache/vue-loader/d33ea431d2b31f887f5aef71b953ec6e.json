{"remainingRequest":"C:\\Users\\alienware\\Desktop\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alienware\\Desktop\\vue_app_00\\src\\components\\subcomponents\\comment.vue?vue&type=style&index=0&id=e10688ce&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\alienware\\Desktop\\vue_app_00\\src\\components\\subcomponents\\comment.vue","mtime":1538708312964},{"path":"C:\\Users\\alienware\\Desktop\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\alienware\\Desktop\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907989000},{"path":"C:\\Users\\alienware\\Desktop\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\alienware\\Desktop\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853417988},{"path":"C:\\Users\\alienware\\Desktop\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.app_subcomment div .textarea {\n  font-size: 10px !important;\n  color: black !important;\n  border-radius: 12px;\n  scrollbar-arrow-color: yellow;\n  scrollbar-base-color: lightsalmon;\n  overflow: hidden;\n  color: #666464;\n  height: auto;\n  margin: 0;\n}\n\n.app_subcomment div.comment {\n  position: relative;\n}\n\n.app_subcomment div.comment ul {\n  list-style: none;\n  padding: 0;\n}\n\n.app_subcomment div.comment ul li {\n  display: flex;\n  justify-content: space-around;\n  width: 100%;\n  border: 1px solid #6464;\n  border-radius: 5px;\n  background: #fff;\n  height: auto;\n  text-align: center;\n  margin-top: 2px;\n\n}\n\n.app_subcomment div.comment ul li span {\n  display: inline-block;\n  padding: 5px;\n  font-size: 12px;\n}\n\n.app_subcomment div.comment ul li span:first-child {\n  background-color: #eee;\n}\n",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"comment.vue","sourceRoot":"src\\components\\subcomponents","sourcesContent":["<template>\r\n  <div class=\"app_subcomment\">\r\n    <div>\r\n      <textarea class=\"textarea\" placeholder=\"请输入评论的内容(最多吐槽120字)\" maxlength=\"120\" v-model=\"msg\"></textarea>\r\n      <mt-button type=\"primary\" size=\"large\" class=\"button\" @click.native=\"submitMsg()\">点击发表评论</mt-button>\r\n    </div>\r\n    <!-- 评论区 -->\r\n    <div class=\"comment\">\r\n      <ul>\r\n        <li v-for=\"(item,i) in list\" :key=\"i\">\r\n          <span>第{{i+1}}楼</span>\r\n          <span>{{item.content | ellipse(123)}}</span>\r\n          <span>{{item.username}}</span>\r\n          <span>{{item.ctime | dateFormat}}</span>\r\n          <p>\r\n            <mt-button type=\"danger\" size=\"small\" @click.native=\"delMsg(item.id)\">删除</mt-button>\r\n          </p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <mt-button type=\"primary\" size=\"large\" @click=\"getMore()\">加载更多....</mt-button>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {\r\n    Toast\r\n  } from \"mint-ui\";\r\n  import Qs from \"qs\";\r\n  import { MessageBox} from \"mint-ui\";\r\n  export default {\r\n    inject:['reload'],\r\n    data() {\r\n      return {\r\n        list: [],\r\n        pageIndex: 0, //当前显示页码\r\n        msg: \"\"\r\n      };\r\n    },\r\n    methods: {\r\n      submitMsg() {\r\n        //  console.log(this.list)\r\n        var username = \"匿名用户\";\r\n        var nid = this.id; //新闻编号\r\n        var content = this.msg; //双想绑定留言的内容\r\n        var url = \"newslist/saveComment\";\r\n        var obj = {\r\n          nid,\r\n          content,\r\n          username\r\n        };\r\n        // this.$http.post(url,obj).then(result=>{\r\n        //     console.log(result);\r\n        //     if(result.body.code==1){\r\n        //     Toast(\"发表成功\")\r\n        // }else{\r\n        //     Toast(\"发表失败\")\r\n        // }\r\n        // })\r\n\r\n        this.$axios.post(url, Qs.stringify(obj)).then(result => {\r\n          // console.log(result);\r\n          if (result.data.code == 1) {\r\n            this.msg = \"\";\r\n            Toast(result.data.msg);\r\n            this.pageIndex = 0;\r\n            this.list = [];\r\n            this.getMore();\r\n          } else if(result.data.code == -1){\r\n            var msg = result.data.msg;\r\n            Toast({\r\n              message: msg,\r\n              duration: 1200\r\n            });\r\n          }else{\r\n            Toast({\r\n              message:result.data.msg,\r\n              duration:1500\r\n            })\r\n          }\r\n        });\r\n\r\n        //  this.list.unshift({content:this.str,id:1,username:\"weigong\",citme:new Date().toLocaleString()})\r\n      },\r\n      getMore() {\r\n        this.pageIndex++; //页码加一\r\n        this.$axios\r\n          .get(\"newslist/commentlist?nid=\" + this.id + \"&pno=\" + this.pageIndex)\r\n          .then(res => {\r\n            this.list = this.list.concat(res.data.data);\r\n            console.log(res.data);\r\n            var len = res.data.data + res.data.pageSize;\r\n            if (this.list.length > len) {\r\n              // console.log(len+res.data.data.length)\r\n              Toast({\r\n                message: \"没有更多了\",\r\n                duration: 800\r\n              });\r\n            }\r\n          });\r\n      },\r\n      delMsg(id){\r\n        MessageBox.confirm(\"确定要删除这条评论吗?\").then(()=>{\r\n          this.$axios.get(\"newslist/delComment?id=\"+id).then(res=>{\r\n              if(res.data.code==1){\r\n                Toast({\r\n                  message:res.data.msg,\r\n                  duartion:1000\r\n                })\r\n              }else{\r\n                Toast({\r\n                  message:res.data.msg,\r\n                  duartion:1000\r\n                })\r\n              }\r\n          })\r\n        }).catch(v=>{\r\n          console.info(v)\r\n        })\r\n         this.reload();\r\n      }\r\n     \r\n    },\r\n    watch: {},\r\n    created() {\r\n      this.getMore();\r\n    },\r\n    props: [\"id\"] //接受父组件的传递参数\r\n  };\r\n</script>\r\n<style scoped>\r\n  .app_subcomment div .textarea {\r\n    font-size: 10px !important;\r\n    color: black !important;\r\n    border-radius: 12px;\r\n    scrollbar-arrow-color: yellow;\r\n    scrollbar-base-color: lightsalmon;\r\n    overflow: hidden;\r\n    color: #666464;\r\n    height: auto;\r\n    margin: 0;\r\n  }\r\n\r\n  .app_subcomment div.comment {\r\n    position: relative;\r\n  }\r\n\r\n  .app_subcomment div.comment ul {\r\n    list-style: none;\r\n    padding: 0;\r\n  }\r\n\r\n  .app_subcomment div.comment ul li {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    width: 100%;\r\n    border: 1px solid #6464;\r\n    border-radius: 5px;\r\n    background: #fff;\r\n    height: auto;\r\n    text-align: center;\r\n    margin-top: 2px;\r\n\r\n  }\r\n\r\n  .app_subcomment div.comment ul li span {\r\n    display: inline-block;\r\n    padding: 5px;\r\n    font-size: 12px;\r\n  }\r\n\r\n  .app_subcomment div.comment ul li span:first-child {\r\n    background-color: #eee;\r\n  }\r\n</style>"]}]}