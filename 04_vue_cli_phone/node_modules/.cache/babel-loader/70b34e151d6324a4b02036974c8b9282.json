{"remainingRequest":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js!c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\src\\components\\user\\register.vue?vue&type=script&lang=js","dependencies":[{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\src\\components\\user\\register.vue","mtime":1542103156000},{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1542103156000},{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js","mtime":1542103156000},{"path":"c:\\Users\\Joanna\\Desktop\\MyProject-master\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1542103156000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.fill\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Qs from \"qs\";\nimport { MessageBox } from 'mint-ui';\nexport default {\n  data: function data() {\n    return {\n      v_code: \"\",\n      v_code_num: \"\",\n      //当前动态生成的验证码\n      v_code_text: \"\",\n      uname: \"\",\n      upwd: \"\",\n      phone: \"\",\n      isuname: \"\",\n      orLogin: false,\n      //是否显示登录\n      res: \"\" //注册结果\n\n    };\n  },\n  methods: {\n    //返回指定范围随机数\n    rn: function rn(min, max) {\n      var n = parseInt(Math.random() * (max - min) + min);\n      return n;\n    },\n    //返回指定范围颜色\n    rc: function rc(mix, max) {\n      var r = this.rn(mix, max);\n      var g = this.rn(mix, max);\n      var b = this.rn(mix, max);\n      return \"rgb(\".concat(r, \",\").concat(g, \",\").concat(b, \")\");\n    },\n    //生成验证码码\n    vify_code: function vify_code() {\n      var vify = document.getElementById(\"vify\");\n      var ctx = vify.getContext(\"2d\");\n      ctx.fillStyle = \"#fff\";\n      ctx.fillRect(0, 0, 320, 100); //创建4个字符\n\n      var pool = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789\";\n\n      for (var i = 0; i < 4; i++) {\n        var c = pool[this.rn(0, pool.length)];\n        ctx.textBaseline = \"top\";\n        ctx.font = \"100px SimHei\";\n        ctx.fillStyle = this.rc(80, 180);\n        ctx.fillText(c, i * 70, 4); // console.log(c)\n\n        this.v_code_num += c;\n      } //创建六条干扰线\n\n\n      for (var i = 0; i < 6; i++) {\n        ctx.beginPath();\n        ctx.strokeStyle = this.rc(0, 255);\n        ctx.moveTo(this.rn(0, 280), this.rn(0, 80));\n        ctx.lineTo(this.rn(0, 280), this.rn(0, 80));\n        ctx.stroke();\n      } //创建30个干扰点\n\n\n      for (var i = 0; i < 60; i++) {\n        ctx.beginPath();\n        ctx.fillStyle = this.rc(0, 255);\n        ctx.arc(this.rn(0, 280), this.rn(0, 80), 3, 0, 2 * Math.PI);\n        ctx.fill();\n      }\n    },\n    changeCode: function changeCode() {\n      this.v_code_num = [];\n      this.vify_code();\n    },\n    //用户名注册的时候失去焦点事件\n    blur_uname: function blur_uname() {\n      var _this = this;\n\n      this.$http.get(\"users/verify?uname=\".concat(this.uname)).then(function (res) {\n        _this.isuname = res.data;\n\n        if (_this.isuname.code == 1) {\n          _this.isuname = \"√\";\n        } else {\n          _this.isuname = \"用户名已存在\";\n        }\n      });\n    },\n    //注册\n    submit: function submit() {\n      var _this2 = this;\n\n      console.log(this.uname);\n      this.$axios.post(\"users/register_phone\", Qs.stringify({\n        uname: this.uname,\n        upwd: this.upwd,\n        phone: this.phone\n      })).then(function (res) {\n        _this2.res = res.data;\n        console.log(res.data);\n\n        if (_this2.res.code == 1) {\n          _this2.orLogin = true;\n        } else {\n          _this2.orLogin = false;\n        }\n\n        MessageBox({\n          title: \"提示\",\n          message: res.data.msg\n        });\n      });\n    },\n    //登录\n    gologin: function gologin() {\n      this.$router.push({\n        path: \"/home/users/login\"\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.vify_code();\n  },\n  watch: {\n    v_code: function v_code() {\n      if (this.v_code == this.v_code_num) {\n        this.v_code_text = \"√\";\n      } else {\n        this.v_code_text = \"x\";\n      }\n    }\n  }\n};",{"version":3,"sources":["register.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <mt-header fixed title=\"注册\" style=\"background:#00A076\">\n            <router-link to=\"/\" slot=\"left\">\n                <mt-button icon=\"back\">返回</mt-button>\n            </router-link>\n        </mt-header>\n        <div class=\"register-container\">\n            <div>\n                <input type=\"phone\" placeholder=\"请输入手机号码\" v-model=\"phone\">\n                <canvas id=\"vify\" @click=\"changeCode()\"></canvas>\n                <input type=\"text\" placeholder=\"请输入验证码\" class=\"my_input\" v-model=\"v_code\">\n                <span style=\"color:#fff\">{{v_code_text}}</span>\n                <input type=\"text\" placeholder=\"请输入用户名\" class=\"my_input\" v-model=\"uname\" @blur.prevent=\"blur_uname\">\n                <span style=\"font-size:10px;color:#fff\">{{isuname}}</span>\n                <input type=\"password\" placeholder=\"请输入密码\" class=\"my_input\" v-model=\"upwd\">\n                <mt-button type=\"default\" size=\"large\" @click=\"submit()\">立即注册</mt-button>\n                <span style=\"font-size:12px\">已有账号? <span style=\"text-decoration:underline\" @click=\"gologin()\">立即登录</span></span>\n                <mt-button style=\"margin-top:10px;\" type=\"default\" size=\"large\" @click=\"gologin()\" v-if=\"orLogin\">立即登录</mt-button>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import Qs from \"qs\"\n    import {\n        MessageBox\n    } from 'mint-ui';\n    export default {\n        data() {\n            return {\n                v_code: \"\",\n                v_code_num: \"\", //当前动态生成的验证码\n                v_code_text: \"\",\n                uname: \"\",\n                upwd: \"\",\n                phone: \"\",\n                isuname: \"\",\n                orLogin: false, //是否显示登录\n                res: \"\", //注册结果\n            }\n        },\n        methods: {\n            //返回指定范围随机数\n            rn(min, max) {\n                var n = parseInt(Math.random() * (max - min) + min);\n                return n;\n            },\n            //返回指定范围颜色\n            rc(mix, max) {\n                var r = this.rn(mix, max);\n                var g = this.rn(mix, max);\n                var b = this.rn(mix, max);\n                return `rgb(${r},${g},${b})`;\n            },\n            //生成验证码码\n            vify_code() {\n                var vify = document.getElementById(\"vify\");\n                var ctx = vify.getContext(\"2d\");\n                ctx.fillStyle = \"#fff\";\n                ctx.fillRect(0, 0, 320, 100);\n                //创建4个字符\n                var pool = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789\";\n                for (var i = 0; i < 4; i++) {\n                    var c = pool[this.rn(0, pool.length)];\n                    ctx.textBaseline = \"top\";\n                    ctx.font = \"100px SimHei\";\n                    ctx.fillStyle = this.rc(80, 180);\n                    ctx.fillText(c, i * 70, 4);\n                    // console.log(c)\n                    this.v_code_num += c;\n                }\n                //创建六条干扰线\n                for (var i = 0; i < 6; i++) {\n                    ctx.beginPath();\n                    ctx.strokeStyle = this.rc(0, 255);\n                    ctx.moveTo(this.rn(0, 280), this.rn(0, 80));\n                    ctx.lineTo(this.rn(0, 280), this.rn(0, 80));\n                    ctx.stroke();\n                }\n                //创建30个干扰点\n                for (var i = 0; i < 60; i++) {\n                    ctx.beginPath();\n                    ctx.fillStyle = this.rc(0, 255);\n                    ctx.arc(this.rn(0, 280), this.rn(0, 80), 3, 0, 2 * Math.PI);\n                    ctx.fill();\n                }\n\n            },\n            changeCode() {\n                this.v_code_num = [];\n                this.vify_code();\n            },\n            //用户名注册的时候失去焦点事件\n            blur_uname() {\n                this.$http.get(`users/verify?uname=${this.uname}`).then(res => {\n                    this.isuname = res.data;\n                    if (this.isuname.code == 1) {\n                        this.isuname = \"√\"\n                    } else {\n                        this.isuname = \"用户名已存在\"\n                    }\n                })\n            },\n            //注册\n            submit() {\n                console.log(this.uname)\n                this.$axios.post(\"users/register_phone\",\n                    Qs.stringify({\n                        uname: this.uname,\n                        upwd: this.upwd,\n                        phone: this.phone,\n                    })\n                ).then(res => {\n                    this.res = res.data;\n                    console.log(res.data)\n                    if (this.res.code == 1) {\n                        this.orLogin = true;\n                    } else {\n                        this.orLogin = false;\n                    }\n                    MessageBox({\n                        title: \"提示\",\n                        message: res.data.msg,\n                    })\n                })\n            },\n            //登录\n            gologin() {\n                this.$router.push({\n                    path: \"/home/users/login\"\n                })\n            }\n        },\n        mounted() {\n            this.vify_code()\n        },\n        watch: {\n            v_code() {\n                if (this.v_code == this.v_code_num) {\n                    this.v_code_text = \"√\";\n                } else {\n                    this.v_code_text = \"x\";\n                }\n            },\n        }\n    }\n</script>\n<style scoped>\n    .register-container {\n        background-image: linear-gradient(180deg, #08B27F, #16B76A);\n        text-align: center;\n        position: relative;\n        min-height: 667px;\n    }\n\n    .register-container div:first-child {\n        list-style: none;\n        position: absolute;\n        left: 10%;\n        top: 5%;\n        width: 80%;\n        text-align: left;\n        margin-top: 5%;\n    }\n\n    [type=\"phone\"] {\n        margin-bottom: 5%;\n    }\n\n    #vify {\n        width: 110px;\n        height: 60px;\n        position: absolute;\n        top: 21%;\n        right: -6%;\n    }\n\n    input {\n        width: 100%;\n        height: 40px;\n        border-radius: 4px;\n        padding-left: 14px;\n        background: hsla(0, 0%, 100%, .2) !important;\n        z-index: 99;\n        color: #f5f5f5 !important;\n        font-size: 13px;\n        outline: 0;\n    }\n\n    .my_input {\n        width: 60%;\n    }\n</style>"],"sourceRoot":"src\\components\\user"}]}