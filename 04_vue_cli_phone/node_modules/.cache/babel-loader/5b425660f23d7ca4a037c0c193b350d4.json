{"remainingRequest":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\src\\components\\goods\\GoodsInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\src\\components\\goods\\GoodsInfo.vue","mtime":1540830443741},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1540554614000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\alienware\\\\Desktop\\\\MyProject\\\\vue_cli_phone\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport swiper from \"../subcomponents/swiper\";\nimport Qs from \"qs\";\nimport { Toast } from \"mint-ui\"; // 由于mui'.js与脚手架严格模式有冲突 放弃\n// import mui from \"../../lib/mui/js/mui.js\";\n\nexport default {\n  inject: ['reload'],\n  data: function data() {\n    return {\n      count: 1,\n      tid: this.$route.params.id,\n      list: [],\n      md: [],\n      imgList: [],\n      products: [],\n      ifshow_lgImg: false,\n      islogin: false,\n      uname: \"\",\n      //当前登录的用户名\n      uid: \"\",\n      //当前用户的uid\n      iscollection: false\n    };\n  },\n  methods: {\n    addCart: function addCart() {\n      var _this = this;\n\n      var tid = this.products.tid;\n      var title = this.products.title;\n      var count = this.count;\n      var price = this.products.price;\n      var md_pic = this.md;\n      var subtitle = this.products.subtitle;\n      var old_price = this.products.old_price;\n      var sold_count = this.products.sold_count;\n      var uid = this.uid;\n      var uname = this.uname; // console.log(title,subtitle,price,old_price,sold_count,md_pic,tid,uid,uname)\n\n      var obj = {\n        title: title,\n        subtitle: subtitle,\n        price: price,\n        old_price: old_price,\n        sold_count: sold_count,\n        md_pic: md_pic,\n        tid: tid,\n        uid: uid,\n        uname: uname\n      };\n      var url = \"/collection/add\";\n      var obj = Qs.stringify(obj);\n\n      if (this.isLogin == false) {\n        this.$router.push({\n          path: \"/home/users/login\"\n        });\n        return;\n      }\n\n      if (this.isLogin == true) {\n        //如果当前图标不为高亮状态 \n        if (this.iscollection == false) {\n          //发送请求 添加数据到数据库\n          this.$axios.post(url, obj).then(function (res) {\n            if (res.data.code == 1) {\n              _this.iscollection = true;\n              Toast({\n                message: \"加入收藏列表成功\",\n                duration: 1500\n              });\n            } else {\n              Toast({\n                message: \"加入收藏列表失败,请刷新一下试试\",\n                duration: 1500\n              });\n            }\n          });\n        } else {\n          this.$axios.post(\"/collection/delete\", Qs.stringify({\n            tid: this.tid\n          })).then(function (res) {\n            if (res.data.code == 1) {\n              Toast({\n                message: \"删除成功\",\n                duration: 1500\n              });\n              _this.iscollection = false;\n            }\n          });\n        }\n      } //          //修改vuex中共享的数据 参数是方法名称\n      //          this.$store.commit(\"increment\",this.count);\n      //         // this.$store.commit(\"clearcount\")\n      //       };\n      //  }\n\n    },\n    goSub: function goSub() {\n      if (this.count <= 1) {\n        return;\n      }\n\n      ;\n      this.count = this.count - 1;\n    },\n    goAdd: function goAdd() {\n      if (this.count >= 99) {\n        return;\n      }\n\n      ;\n      this.count = this.count + 1;\n    },\n    show_lgImg: function show_lgImg() {\n      if (this.ifshow_lgImg === false) {\n        this.ifshow_lgImg = true;\n      } else {\n        this.ifshow_lgImg = false;\n      }\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    (function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(self) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return self.$axios.get(\"/users/islogin\");\n\n              case 2:\n                res = _context.sent;\n\n                if (res.data.ok == 1) {\n                  self.isLogin = true;\n                  self.uname = res.data.uname;\n                  self.uid = res.data.uid;\n                } else {\n                  self.isLogin = false;\n                } //2.判断当前产品是否被当前用户收藏\n\n\n                _context.next = 6;\n                return self.$axios.get(\"/collection/iscollection?uname=\".concat(self.uname, \"&tid=\").concat(self.tid));\n\n              case 6:\n                res = _context.sent;\n\n                if (res.data.code == 1) {\n                  self.iscollection = true;\n                } else {\n                  self.iscollection = false;\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    })()(this);\n    this.$axios.get(\"details?tid=\" + this.tid).then(function (res) {\n      _this2.products = res.data.product;\n      _this2.imgList = res.data.pics;\n      _this2.md = res.data.pics[0].md;\n    });\n  },\n  components: {\n    swiper: swiper\n  }\n};",{"version":3,"sources":["GoodsInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <!-- 轮播 -->\n  <div>\n  <div class=\"app-goods-info\">\n    <div class=\"mui-card\">\n      <div class=\"mui-card-content\">\n        <div class=\"mui-card-content-inner\">\n          <mt-swipe :auto=\"3000\" style=\"height:200px;\">\n      <mt-swipe-item v-for=\"(item,i) in imgList\" :key=\"item.id\">\n        <img :src=\"item.md\" alt=\"\" style=\"width:100%\">\n      </mt-swipe-item>\n    </mt-swipe>\n        </div>\n      </div>\n    </div>\n    <!-- 第二部分购买区域 -->\n     \n   \t\t<div class=\"mui-card\">\n\t\t\t\t<div class=\"mui-card-header\">{{products.title}}</div>\n\t\t\t\t<div class=\"mui-card-content\">\n\t\t\t\t\t<div class=\"mui-card-content-inner\">\n            <div class=\"details\">{{products.title}}</div>\n            <div class=\"price\">\n            <b>市场价: </b>\n            <span class=\"old\">{{(Number(products.price)).toFixed(2)}}</span>\n            <span class=\"now\">销售价:{{(Number(products.price)).toFixed(2)}}</span>\n           </div>\n          <div class=\"count\">\n            <h6>购买数量</h6>\n            <mt-button size=\"small\" @click=\"goSub()\">-</mt-button>\n            <span class=\"number\">{{count}}</span>\n            <mt-button size=\"small\"  @click=\"goAdd()\">+</mt-button>\n         \n            <p class=\"booking\">\n              <mt-button size=\"small\" type=\"primary\">立即购买</mt-button>\n              <mt-button size=\"small\" type=\"default\" :class=\"{love_active:iscollection}\" @click=\"addCart()\">收藏</mt-button>\n            </p>\n          </div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n    <!-- 第三部分 -->\n    <div class=\"mui-card\">\n      <div class=\"mui-card-header\">商品参数</div>\n      <div class=\"mui-card-content\">\n        <div class=\"mui-card-content-inner\">\n           <div>\n            <ul class=\"info-list\">\n              <li>商品货号:{{products.product_number}}</li>\n             <li>商品特色:{{products.subtitle}}</li>\n              <li>我们承诺:{{products.promise}}</li>\n              <li>注意事项:{{products.prompt}}</li> \n            </ul>\n          </div>\n        </div>\n        <div class=\"mui-card-footer\">\n        <div class=\"intro\">\n          <p> \n            <mt-button size=\"small\" @click=\"show_lgImg()\">图文介绍</mt-button>\n          </p>\n          <p>\n            <mt-button size=\"small\">商品评论</mt-button>\n           </p>\n        </div>\n        </div>\n         <div class=\"intro-img\" v-if=\"ifshow_lgImg\">\n          <img :src=\"products.lg_pic\" alt=\"\">\n        </div>\n      </div>\n    </div>\n  </div>\n  </div>\n</template>\n<script>\nimport swiper from \"../subcomponents/swiper\";\nimport Qs from \"qs\";\nimport {Toast} from \"mint-ui\";\n// 由于mui'.js与脚手架严格模式有冲突 放弃\n// import mui from \"../../lib/mui/js/mui.js\";\nexport default {\n  inject: ['reload'],\n  data() {\n    return {\n      count:1,\n      tid: this.$route.params.id,\n      list: [],\n      md:[],\n      imgList:[],\n      products:[],\n      ifshow_lgImg:false,\n      islogin:false,\n      uname:\"\",//当前登录的用户名\n      uid:\"\",//当前用户的uid\n      iscollection: false,\n    };\n  },\n  methods: {\n  \n    addCart(){\n      var tid=this.products.tid;\n      var title=this.products.title;\n      var count=this.count;\n      var price=this.products.price;\n      var md_pic = this.md;\n      var subtitle = this.products.subtitle;\n      var old_price = this.products.old_price;\n      var sold_count = this.products.sold_count;\n      var uid = this.uid;\n      var uname = this.uname;\n      // console.log(title,subtitle,price,old_price,sold_count,md_pic,tid,uid,uname)\n      var obj={title,subtitle,price,old_price,sold_count,md_pic,tid,uid,uname};\n      var url=\"/collection/add\";\n       var obj=(Qs.stringify(obj));\n        if (this.isLogin == false) {\n          this.$router.push({path:\"/home/users/login\"\n            });\n          return;\n        }\n         if (this.isLogin == true) {\n          //如果当前图标不为高亮状态 \n          if (this.iscollection == false) {\n            //发送请求 添加数据到数据库\n            this.$axios\n              .post(\n                url,\n                obj\n              )\n              .then(res => {\n                if(res.data.code==1){\n                  this.iscollection = true;\n                  Toast({\n                    message:\"加入收藏列表成功\",\n                    duration:1500\n                  })\n                }else{\n                  Toast({\n                    message:\"加入收藏列表失败,请刷新一下试试\",\n                    duration:1500\n                  })\n                }\n              });\n          } else {\n            this.$axios\n              .post(\n                \"/collection/delete\",\n                Qs.stringify({\n                  tid: this.tid\n                })\n              )\n              .then(res => {\n                if(res.data.code==1){\n                  Toast({\n                    message:\"删除成功\",\n                    duration:1500\n                  })\n                  this.iscollection = false;\n                }\n              });\n          }\n        }\n          \n    //          //修改vuex中共享的数据 参数是方法名称\n    //          this.$store.commit(\"increment\",this.count);\n    //         // this.$store.commit(\"clearcount\")\n    //       };\n    //  }\n   \n   \n    },\n    goSub(){\n      if(this.count<=1){return};\n       this.count = this.count-1;\n    },\n    goAdd(){\n      if(this.count>=99){return};\n       this.count = this.count+1;\n    },\n    show_lgImg(){\n      if(this.ifshow_lgImg===false){\n        this.ifshow_lgImg = true;\n      }else{\n        this.ifshow_lgImg = false;\n      }\n    }\n  },\n  created() {\n      (async function (self) {\n        //1.判断是否登录\n        var res = await self.$axios.get(\"/users/islogin\")\n        if (res.data.ok == 1) {\n          self.isLogin = true;\n          self.uname = res.data.uname;\n          self.uid = res.data.uid;\n        } else {\n          self.isLogin = false;\n        }\n        //2.判断当前产品是否被当前用户收藏\n        var res = await self.$axios.get(`/collection/iscollection?uname=${self.uname}&tid=${self.tid}`)\n        if (res.data.code == 1) {\n          self.iscollection = true;\n        } else {\n          self.iscollection = false;\n        }\n      })(this);\n    this.$axios.get(\"details?tid=\" + this.tid).then(res => {\n        this.products = res.data.product;\n        this.imgList  = res.data.pics;\n        this.md = res.data.pics[0].md;\n    });\n  },\n  components: {\n    swiper\n  }\n};\n</script>\n<style scoped>\n.old {\n  text-decoration: line-through;\n}\n.love_active{\n  background: #EF4F4F !important;\n  color:#fff;\n}\n.price .now {\n  color: #ff7467;\n  font-weight: 600;\n  margin-left: 10px;\n}\n.number {\n  display: inline-block;\n  width: 32px;\n  height: 32px;\n  text-align: center;\n  line-height: 32px;\n}\n.booking {\n  margin-top: 8px;\n}\n/*参数*/\n.product_info_details {\n  background: #fff;\n}\nul.info-list {\n  list-style: none;\n  padding: 10px;\n  margin-bottom: 5px;\n  margin-top: 8px;\n}\n.info-list li {\n  font-size: 12px;\n  color: #666;\n  padding:5px 0;\n  letter-spacing: 1px;\n  border-bottom:1px solid #ddd;\n}\ndiv.intro {\n  display: flex !important;\n  width: 100%;\n  justify-content: space-between;\n  padding: 10px;\n}\n.intro-img{\n  width:100%;\n}\n.intro-img img{\n  width:100%;\n  \n}\n</style>"],"sourceRoot":"src\\components\\goods"}]}