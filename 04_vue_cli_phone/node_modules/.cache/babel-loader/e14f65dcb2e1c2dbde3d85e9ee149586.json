{"remainingRequest":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\subcomponents\\comment.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\subcomponents\\comment.vue","mtime":1540829307383},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1540554614000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nimport Qs from \"qs\";\nimport { MessageBox } from \"mint-ui\";\nexport default {\n  inject: ['reload'],\n  data: function data() {\n    return {\n      list: [],\n      pageIndex: 0,\n      //当前显示页码\n      msg: \"\"\n    };\n  },\n  methods: {\n    submitMsg: function submitMsg() {\n      var _this = this;\n\n      //  console.log(this.list)\n      var username = \"匿名用户\";\n      var nid = this.id; //新闻编号\n\n      var content = this.msg; //双想绑定留言的内容\n\n      var url = \"newslist/saveComment\";\n      var obj = {\n        nid: nid,\n        content: content,\n        username: username\n      };\n      this.$axios.post(url, Qs.stringify(obj)).then(function (result) {\n        // console.log(result);\n        if (result.data.code == 1) {\n          _this.msg = \"\";\n          Toast(result.data.msg);\n          _this.pageIndex = 0;\n          _this.list = [];\n\n          _this.getMore();\n        } else if (result.data.code == -1) {\n          var msg = result.data.msg;\n          Toast({\n            message: msg,\n            duration: 1200\n          });\n        } else {\n          Toast({\n            message: result.data.msg,\n            duration: 1500\n          });\n        }\n      }); //  this.list.unshift({content:this.str,id:1,username:\"weigong\",citme:new Date().toLocaleString()})\n    },\n    getMore: function getMore() {\n      var _this2 = this;\n\n      this.pageIndex++; //页码加一\n\n      this.$axios.get(\"newslist/commentlist?nid=\" + this.id + \"&pno=\" + this.pageIndex).then(function (res) {\n        _this2.list = _this2.list.concat(res.data.data);\n        var len = res.data.data + res.data.pageSize;\n\n        if (_this2.list.length > len) {\n          // console.log(len+res.data.data.length)\n          Toast({\n            message: \"没有更多了\",\n            duration: 800\n          });\n        }\n      });\n    },\n    delMsg: function delMsg(id) {\n      var _this3 = this;\n\n      MessageBox.confirm(\"确定要删除这条评论吗?\").then(function () {\n        _this3.$axios.get(\"newslist/delComment?id=\" + id).then(function (res) {\n          if (res.data.code == 1) {\n            Toast({\n              message: res.data.msg,\n              duartion: 1000\n            });\n          } else {\n            Toast({\n              message: res.data.msg,\n              duartion: 1000\n            });\n          }\n\n          _this3.reload();\n        });\n      }).catch(function (v) {\n        console.info(v);\n      });\n    }\n  },\n  watch: {},\n  created: function created() {\n    this.getMore();\n  },\n  props: [\"id\"] //接受父组件的传递参数\n\n};",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAwBA,SACA,KADA,QAEA,SAFA;AAGA,OAAA,EAAA,MAAA,IAAA;AACA,SAAA,UAAA,QAAA,SAAA;AACA,eAAA;AACA,UAAA,CAAA,QAAA,CADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,YAAA,EADA;AAEA,iBAAA,CAFA;AAEA;AACA,WAAA;AAHA,KAAA;AAKA,GARA;AASA,WAAA;AACA,aADA,uBACA;AAAA;;AACA;AACA,UAAA,WAAA,MAAA;AACA,UAAA,MAAA,KAAA,EAAA,CAHA,CAGA;;AACA,UAAA,UAAA,KAAA,GAAA,CAJA,CAIA;;AACA,UAAA,MAAA,sBAAA;AACA,UAAA,MAAA;AACA,gBADA;AAEA,wBAFA;AAGA;AAHA,OAAA;AAKA,WAAA,MAAA,CAAA,IAAA,CAAA,GAAA,EAAA,GAAA,SAAA,CAAA,GAAA,CAAA,EAAA,IAAA,CAAA,kBAAA;AACA;AACA,YAAA,OAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBAAA,GAAA,GAAA,EAAA;AACA,gBAAA,OAAA,IAAA,CAAA,GAAA;AACA,gBAAA,SAAA,GAAA,CAAA;AACA,gBAAA,IAAA,GAAA,EAAA;;AACA,gBAAA,OAAA;AACA,SANA,MAMA,IAAA,OAAA,IAAA,CAAA,IAAA,IAAA,CAAA,CAAA,EAAA;AACA,cAAA,MAAA,OAAA,IAAA,CAAA,GAAA;AACA,gBAAA;AACA,qBAAA,GADA;AAEA,sBAAA;AAFA,WAAA;AAIA,SANA,MAMA;AACA,gBAAA;AACA,qBAAA,OAAA,IAAA,CAAA,GADA;AAEA,sBAAA;AAFA,WAAA;AAIA;AACA,OApBA,EAXA,CAiCA;AACA,KAnCA;AAoCA,WApCA,qBAoCA;AAAA;;AACA,WAAA,SAAA,GADA,CACA;;AACA,WAAA,MAAA,CACA,GADA,CACA,8BAAA,KAAA,EAAA,GAAA,OAAA,GAAA,KAAA,SADA,EAEA,IAFA,CAEA,eAAA;AACA,eAAA,IAAA,GAAA,OAAA,IAAA,CAAA,MAAA,CAAA,IAAA,IAAA,CAAA,IAAA,CAAA;AACA,YAAA,MAAA,IAAA,IAAA,CAAA,IAAA,GAAA,IAAA,IAAA,CAAA,QAAA;;AACA,YAAA,OAAA,IAAA,CAAA,MAAA,GAAA,GAAA,EAAA;AACA;AACA,gBAAA;AACA,qBAAA,OADA;AAEA,sBAAA;AAFA,WAAA;AAIA;AACA,OAZA;AAaA,KAnDA;AAoDA,UApDA,kBAoDA,EApDA,EAoDA;AAAA;;AACA,iBAAA,OAAA,CAAA,aAAA,EAAA,IAAA,CAAA,YAAA;AACA,eAAA,MAAA,CAAA,GAAA,CAAA,4BAAA,EAAA,EAAA,IAAA,CAAA,eAAA;AACA,cAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,kBAAA;AACA,uBAAA,IAAA,IAAA,CAAA,GADA;AAEA,wBAAA;AAFA,aAAA;AAIA,WALA,MAKA;AACA,kBAAA;AACA,uBAAA,IAAA,IAAA,CAAA,GADA;AAEA,wBAAA;AAFA,aAAA;AAIA;;AACA,iBAAA,MAAA;AACA,SAbA;AAcA,OAfA,EAeA,KAfA,CAeA,aAAA;AACA,gBAAA,IAAA,CAAA,CAAA;AACA,OAjBA;AAmBA;AAxEA,GATA;AAoFA,SAAA,EApFA;AAqFA,SArFA,qBAqFA;AACA,SAAA,OAAA;AACA,GAvFA;AAwFA,SAAA,CAAA,IAAA,CAxFA,CAwFA;;AAxFA,CAAA","sourcesContent":["<template>\n  <div class=\"app_subcomment\">\n    <div>\n      <textarea class=\"textarea\" placeholder=\"请输入评论的内容(最多吐槽120字)\" maxlength=\"120\" v-model=\"msg\"></textarea>\n      <mt-button type=\"primary\" size=\"large\" class=\"button\" @click.native=\"submitMsg()\">点击发表评论</mt-button>\n    </div>\n    <!-- 评论区 -->\n    <div class=\"comment\">\n      <ul>\n        <li v-for=\"(item,i) in list\" :key=\"i\">\n          <span>第{{i+1}}楼</span>\n          <span>{{item.content | ellipse(123)}}</span>\n          <span>{{item.username}}</span>\n          <span>{{item.ctime | dateFormat}}</span>\n          <p>\n            <mt-button type=\"danger\" size=\"small\" @click.native=\"delMsg(item.id)\">删除</mt-button>\n          </p>\n        </li>\n      </ul>\n    </div>\n    <mt-button type=\"primary\" size=\"large\" @click=\"getMore()\">加载更多....</mt-button>\n  </div>\n</template>\n<script>\n  import {\n    Toast\n  } from \"mint-ui\";\n  import Qs from \"qs\";\n  import { MessageBox} from \"mint-ui\";\n  export default {\n    inject:['reload'],\n    data() {\n      return {\n        list: [],\n        pageIndex: 0, //当前显示页码\n        msg: \"\"\n      };\n    },\n    methods: {\n      submitMsg() {\n        //  console.log(this.list)\n        var username = \"匿名用户\";\n        var nid = this.id; //新闻编号\n        var content = this.msg; //双想绑定留言的内容\n        var url = \"newslist/saveComment\";\n        var obj = {\n          nid,\n          content,\n          username\n        };\n        this.$axios.post(url, Qs.stringify(obj)).then(result => {\n          // console.log(result);\n          if (result.data.code == 1) {\n            this.msg = \"\";\n            Toast(result.data.msg);\n            this.pageIndex = 0;\n            this.list = [];\n            this.getMore();\n          } else if(result.data.code == -1){\n            var msg = result.data.msg;\n            Toast({\n              message: msg,\n              duration: 1200\n            });\n          }else{\n            Toast({\n              message:result.data.msg,\n              duration:1500\n            })\n          }\n        });\n\n        //  this.list.unshift({content:this.str,id:1,username:\"weigong\",citme:new Date().toLocaleString()})\n      },\n      getMore() {\n        this.pageIndex++; //页码加一\n        this.$axios\n          .get(\"newslist/commentlist?nid=\" + this.id + \"&pno=\" + this.pageIndex)\n          .then(res => {\n            this.list = this.list.concat(res.data.data);\n            var len = res.data.data + res.data.pageSize;\n            if (this.list.length > len) {\n              // console.log(len+res.data.data.length)\n              Toast({\n                message: \"没有更多了\",\n                duration: 800\n              });\n            }\n          });\n      },\n      delMsg(id){\n        MessageBox.confirm(\"确定要删除这条评论吗?\").then(()=>{\n          this.$axios.get(\"newslist/delComment?id=\"+id).then(res=>{\n              if(res.data.code==1){\n                Toast({\n                  message:res.data.msg,\n                  duartion:1000\n                })\n              }else{\n                Toast({\n                  message:res.data.msg,\n                  duartion:1000\n                })\n              }\n               this.reload();\n          })\n        }).catch(v=>{\n          console.info(v)\n        })\n      \n      }\n     \n    },\n    watch: {},\n    created() {\n      this.getMore();\n    },\n    props: [\"id\"] //接受父组件的传递参数\n  };\n</script>\n<style scoped>\n  .app_subcomment div .textarea {\n    font-size: 10px !important;\n    color: black !important;\n    border-radius: 12px;\n    scrollbar-arrow-color: yellow;\n    scrollbar-base-color: lightsalmon;\n    overflow: hidden;\n    color: #666464;\n    height: auto;\n    margin: 0;\n  }\n\n  .app_subcomment div.comment {\n    position: relative;\n  }\n\n  .app_subcomment div.comment ul {\n    list-style: none;\n    padding: 0;\n  }\n\n  .app_subcomment div.comment ul li {\n    display: flex;\n    justify-content: space-around;\n    width: 100%;\n    border: 1px solid #6464;\n    border-radius: 5px;\n    background: #fff;\n    height: auto;\n    text-align: center;\n    margin-top: 2px;\n\n  }\n\n  .app_subcomment div.comment ul li span {\n    display: inline-block;\n    padding: 5px;\n    font-size: 12px;\n  }\n\n  .app_subcomment div.comment ul li span:first-child {\n    background-color: #eee;\n  }\n</style>"],"sourceRoot":"src\\components\\subcomponents"}]}