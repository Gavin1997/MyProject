{"remainingRequest":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\src\\App.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\src\\App.vue","mtime":1540744574422},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1540554614000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\alienware\\\\Desktop\\\\MyProject\\\\vue_cli_phone\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"app\",\n  provide: function provide() {\n    return {\n      reload: this.reload\n    };\n  },\n  data: function data() {\n    return {\n      isRouterAlive: true,\n      list: [],\n      num: 0,\n      if_tab_show: true,\n      islogin: false,\n      islogin_register: true,\n      uname: \"\" //d当前session中的名字\n\n    };\n  },\n  methods: {\n    reload: function reload() {\n      var _this = this;\n\n      this.isRouterAlive = false;\n      this.$nextTick(function () {\n        _this.isRouterAlive = true;\n      });\n    },\n    //判断用户是否登录\n    isLogin: function isLogin() {\n      var _this2 = this;\n\n      this.$axios.get(\"users/islogin\").then(function (res) {\n        if (res.data.ok == 1) {\n          _this2.uname = res.data.uname;\n          _this2.islogin = true;\n          _this2.islogin_register = false;\n        } else {\n          _this2.islogin = false;\n          _this2.islogin_register = true;\n        }\n      });\n    },\n    //跳转用户信息\n    gouserinfo: function gouserinfo() {\n      this.$router.push({\n        path: \"/home/member\"\n      });\n    },\n    //跳转用户注册\n    goregister: function goregister() {\n      this.$router.push({\n        path: \"/home/users/register\"\n      });\n    },\n    //跳转用户登录\n    gologin: function gologin() {\n      this.$router.push({\n        path: \"/home/users/login\"\n      });\n    },\n    //退出登录\n    signout: function signout() {\n      var _this3 = this;\n\n      this.$axios.get(\"users/signout\").then(function (res) {\n        _this3.reload();\n      });\n    }\n  },\n  created: function created() {\n    this.isLogin();\n  },\n  watch: {\n    '$route': function $route(to, from) {\n      // this.isLogin();\n      (function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee(self) {\n          var res;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return self.$axios.get(\"/users/islogin\");\n\n                case 2:\n                  res = _context.sent;\n\n                  if (res.data.ok == 1) {\n                    self.isLogin = true;\n                    self.uname = res.data.uname;\n                    self.uid = res.data.uid;\n                  } else {\n                    self.isLogin = false;\n                  } //2.查询当前用户的购物车\n\n\n                  _context.next = 6;\n                  return self.$axios.get(\"/collection/searchlist?uname=\".concat(self.uname));\n\n                case 6:\n                  res = _context.sent;\n                  self.products_res = res.data.data;\n                  self.num = self.products_res.length;\n\n                  if (res.data.code == -1) {\n                    self.ifshow = true;\n                    self.res_msg = res.data.msg;\n                  } else {\n                    self.ifshow = false;\n                  }\n\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      })()(this);\n    }\n  }\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,eAAA;AACA,QAAA,KADA;AAEA,SAFA,qBAEA;AACA,WAAA;AACA,cAAA,KAAA;AADA,KAAA;AAIA,GAPA;AAQA,MARA,kBAQA;AACA,WAAA;AACA,qBAAA,IADA;AAEA,YAAA,EAFA;AAGA,WAAA,CAHA;AAIA,mBAAA,IAJA;AAKA,eAAA,KALA;AAMA,wBAAA,IANA;AAOA,aAAA,EAPA,CAOA;;AAPA,KAAA;AAUA,GAnBA;AAoBA,WAAA;AACA,UADA,oBACA;AAAA;;AACA,WAAA,aAAA,GAAA,KAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,cAAA,aAAA,GAAA,IAAA;AACA,OAFA;AAGA,KANA;AAOA;AACA,WARA,qBAQA;AAAA;;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,eAAA,EAAA,IAAA,CAAA,eAAA;AACA,YAAA,IAAA,IAAA,CAAA,EAAA,IAAA,CAAA,EAAA;AACA,iBAAA,KAAA,GAAA,IAAA,IAAA,CAAA,KAAA;AACA,iBAAA,OAAA,GAAA,IAAA;AACA,iBAAA,gBAAA,GAAA,KAAA;AACA,SAJA,MAIA;AACA,iBAAA,OAAA,GAAA,KAAA;AACA,iBAAA,gBAAA,GAAA,IAAA;AACA;AACA,OATA;AAUA,KAnBA;AAoBA;AACA,cArBA,wBAqBA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,cAAA;AADA,OAAA;AAGA,KAzBA;AA0BA;AACA,cA3BA,wBA2BA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,cAAA;AADA,OAAA;AAGA,KA/BA;AAgCA;AACA,WAjCA,qBAiCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,cAAA;AADA,OAAA;AAIA,KAtCA;AAuCA;AACA,WAxCA,qBAwCA;AAAA;;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,eAAA,EAAA,IAAA,CAAA,eAAA;AACA,eAAA,MAAA;AACA,OAFA;AAGA;AA5CA,GApBA;AAkEA,SAlEA,qBAkEA;AACA,SAAA,OAAA;AACA,GApEA;AAqEA,SAAA;AACA,YADA,kBACA,EADA,EACA,IADA,EACA;AACA;AACA;AAAA;AAAA;AAAA,gCAAA,iBAAA,IAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEA,KAAA,MAAA,CAAA,GAAA,CAAA,gBAAA,CAFA;;AAAA;AAEA,qBAFA;;AAGA,sBAAA,IAAA,IAAA,CAAA,EAAA,IAAA,CAAA,EAAA;AACA,yBAAA,OAAA,GAAA,IAAA;AACA,yBAAA,KAAA,GAAA,IAAA,IAAA,CAAA,KAAA;AACA,yBAAA,GAAA,GAAA,IAAA,IAAA,CAAA,GAAA;AACA,mBAJA,MAIA;AACA,yBAAA,OAAA,GAAA,KAAA;AACA,mBATA,CAUA;;;AAVA;AAAA,yBAWA,KAAA,MAAA,CAAA,GAAA,wCAAA,KAAA,KAAA,EAXA;;AAAA;AAWA,qBAXA;AAYA,uBAAA,YAAA,GAAA,IAAA,IAAA,CAAA,IAAA;AACA,uBAAA,GAAA,GAAA,KAAA,YAAA,CAAA,MAAA;;AACA,sBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,CAAA,EAAA;AACA,yBAAA,MAAA,GAAA,IAAA;AACA,yBAAA,OAAA,GAAA,IAAA,IAAA,CAAA,GAAA;AACA,mBAHA,MAGA;AACA,yBAAA,MAAA,GAAA,KAAA;AACA;;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA;;AAAA;AAAA;AAAA;AAAA,WAoBA,IApBA;AAqBA;AAxBA;AArEA,CAAA","sourcesContent":["<template>\n    <div class=\"app-container\">\n        <!-- 1:顶部导航 -->\n        <mt-header title=\"心灵旅游\" fixed style=\"background: linear-gradient(180deg, #43C67B, #10BFA4);\">\n            <!-- <router-link to=\"/\" slot=\"left\">\n    <mt-button icon=\"back\">返回</mt-button>\n  </router-link> -->\n            <mt-button slot=\"right\" @click=\"gouserinfo()\" v-if=\"islogin\">{{uname}}</mt-button>\n            <mt-button slot=\"right\" style=\"margin:0 5px;\" @click=\"signout()\" v-if=\"islogin\">退出登录</mt-button>\n            <mt-button slot=\"right\" style=\"margin:0 5px;\" @click=\"goregister()\" v-if=\"islogin_register\">注册</mt-button>\n            <mt-button slot=\"right\" @click=\"gologin()\" v-if=\"islogin_register\">登录</mt-button>\n        </mt-header>\n        <!-- 2:路由 -->\n        <router-view v-if=\"isRouterAlive\"></router-view>\n        <!-- 3:tabbar -->\n        <nav class=\"mui-bar mui-bar-tab\">\n            <router-link class=\"mui-tab-item \" to=\"/home/index\">\n                <span class=\"mui-icon mui-icon-home\"></span>\n                <span class=\"mui-tab-label\">首页</span>\n            </router-link>\n\n            <router-link class=\"mui-tab-item\" to=\"/home/search\">\n                <span class=\"mui-icon  mui-icon-search\"></span>\n                <span class=\"mui-tab-label\">搜索</span>\n            </router-link>\n            <router-link class=\"mui-tab-item\" to=\"/home/shopcart\">\n                <!-- <span class=\"mui-icon mui-icon-extra mui-icon-extra-heart\"><span class=\"mui-badge\">{{$store.getters.optCount}}</span></span> -->\n                <span class=\"mui-icon mui-icon-extra mui-icon-extra-heart\"><span class=\"mui-badge\">{{num}}</span></span>\n                <span class=\"mui-tab-label\">我的收藏</span>\n            </router-link>\n\n            <router-link class=\"mui-tab-item \" to=\"/home/member\">\n                <span class=\"mui-icon mui-icon-contact\"></span>\n                <span class=\"mui-tab-label\">会员</span>\n            </router-link>\n        </nav>\n    </div>\n</template>\n<script>\n    export default {\n        name: \"app\",\n        provide() {\n            return {\n                reload: this.reload,\n\n            }\n        },\n        data() {\n            return {\n                isRouterAlive: true,\n                list: [],\n                num: 0,\n                if_tab_show: true,\n                islogin: false,\n                islogin_register: true,\n                uname: \"\", //d当前session中的名字\n\n            }\n        },\n        methods: {\n            reload() {\n                this.isRouterAlive = false;\n                this.$nextTick(() => {\n                    this.isRouterAlive = true;\n                })\n            },\n            //判断用户是否登录\n            isLogin() {\n                this.$axios.get(\"users/islogin\").then(res => {\n                    if (res.data.ok == 1) {\n                        this.uname = res.data.uname;\n                        this.islogin = true;\n                        this.islogin_register = false\n                    } else {\n                        this.islogin = false\n                        this.islogin_register = true\n                    }\n                })\n            },\n            //跳转用户信息\n            gouserinfo() {\n                this.$router.push({\n                    path: \"/home/member\"\n                })\n            },\n            //跳转用户注册\n            goregister() {\n                this.$router.push({\n                    path: \"/home/users/register\"\n                })\n            },\n            //跳转用户登录\n            gologin() {\n                this.$router.push({\n                    path: \"/home/users/login\"\n                });\n\n            },\n            //退出登录\n            signout() {\n                this.$axios.get(\"users/signout\").then(res => {\n                    this.reload()\n                })\n            }\n        },\n        created() {\n            this.isLogin();\n        },\n        watch: {\n            '$route'(to, from) {\n                // this.isLogin();\n                (async function (self) {\n                    //1.判断用户是否登录\n                    var res = await self.$axios.get(\"/users/islogin\")\n                    if (res.data.ok == 1) {\n                        self.isLogin = true;\n                        self.uname = res.data.uname;\n                        self.uid = res.data.uid;\n                    } else {\n                        self.isLogin = false;\n                    }\n                    //2.查询当前用户的购物车\n                    var res = await self.$axios.get(`/collection/searchlist?uname=${self.uname}`)\n                    self.products_res = res.data.data;\n                    self.num = self.products_res.length;\n                    if (res.data.code == -1) {\n                        self.ifshow = true;\n                        self.res_msg = res.data.msg;\n                    } else {\n                        self.ifshow = false;\n                    }\n                })(this)\n            }\n        }\n    }\n</script>\n<style>\n    .app-container {\n        padding-top: 40px;\n        padding-bottom: 50px;\n        overflow-x: hidden;\n    }\n\n    .mui-bar-tab .mui-tab-item-tao.mui-active {\n        color: #007aff;\n    }\n\n    .mui-bar-tab .mui-tab-item-tao {\n        display: table-cell;\n        overflow: hidden;\n        width: 1%;\n        height: 50px;\n        text-align: center;\n        vertical-align: middle;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        color: #929292;\n    }\n\n    .mui-bar-tab .mui-tab-item-tao .mui-icon {\n        top: 3px;\n        width: 24px;\n        height: 24px;\n        padding-top: 0;\n        padding-bottom: 0;\n    }\n\n    .mui-bar-tab .mui-tab-item-tao .mui-icon~.mui-tab-label {\n        font-size: 11px;\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n</style>"],"sourceRoot":"src"}]}