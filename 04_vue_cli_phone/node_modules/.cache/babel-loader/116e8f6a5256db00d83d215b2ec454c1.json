{"remainingRequest":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\src\\components\\user\\register.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\src\\components\\user\\register.vue","mtime":1540734037314},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1540554614000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.fill\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Qs from \"qs\";\nimport { MessageBox } from 'mint-ui';\nexport default {\n  data: function data() {\n    return {\n      v_code: \"\",\n      v_code_num: \"\",\n      //当前动态生成的验证码\n      v_code_text: \"\",\n      uname: \"\",\n      upwd: \"\",\n      phone: \"\",\n      isuname: \"\",\n      orLogin: false,\n      //是否显示登录\n      res: \"\" //注册结果\n\n    };\n  },\n  methods: {\n    //返回指定范围随机数\n    rn: function rn(min, max) {\n      var n = parseInt(Math.random() * (max - min) + min);\n      return n;\n    },\n    //返回指定范围颜色\n    rc: function rc(mix, max) {\n      var r = this.rn(mix, max);\n      var g = this.rn(mix, max);\n      var b = this.rn(mix, max);\n      return \"rgb(\".concat(r, \",\").concat(g, \",\").concat(b, \")\");\n    },\n    //生成验证码码\n    vify_code: function vify_code() {\n      var vify = document.getElementById(\"vify\");\n      var ctx = vify.getContext(\"2d\");\n      ctx.fillStyle = \"#fff\";\n      ctx.fillRect(0, 0, 320, 100); //创建4个字符\n\n      var pool = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789\";\n\n      for (var i = 0; i < 4; i++) {\n        var c = pool[this.rn(0, pool.length)];\n        ctx.textBaseline = \"top\";\n        ctx.font = \"100px SimHei\";\n        ctx.fillStyle = this.rc(80, 180);\n        ctx.fillText(c, i * 70, 4); // console.log(c)\n\n        this.v_code_num += c;\n      } //创建六条干扰线\n\n\n      for (var i = 0; i < 6; i++) {\n        ctx.beginPath();\n        ctx.strokeStyle = this.rc(0, 255);\n        ctx.moveTo(this.rn(0, 280), this.rn(0, 80));\n        ctx.lineTo(this.rn(0, 280), this.rn(0, 80));\n        ctx.stroke();\n      } //创建30个干扰点\n\n\n      for (var i = 0; i < 60; i++) {\n        ctx.beginPath();\n        ctx.fillStyle = this.rc(0, 255);\n        ctx.arc(this.rn(0, 280), this.rn(0, 80), 3, 0, 2 * Math.PI);\n        ctx.fill();\n      }\n    },\n    changeCode: function changeCode() {\n      this.v_code_num = [];\n      this.vify_code();\n    },\n    //用户名注册的时候失去焦点事件\n    blur_uname: function blur_uname() {\n      var _this = this;\n\n      this.$http.get(\"users/verify?uname=\".concat(this.uname)).then(function (res) {\n        _this.isuname = res.data;\n\n        if (_this.isuname.code == 1) {\n          _this.isuname = \"√\";\n        } else {\n          _this.isuname = \"用户名已存在\";\n        }\n      });\n    },\n    //注册\n    submit: function submit() {\n      var _this2 = this;\n\n      console.log(this.uname);\n      this.$axios.post(\"users/register_phone\", Qs.stringify({\n        uname: this.uname,\n        upwd: this.upwd,\n        phone: this.phone\n      })).then(function (res) {\n        _this2.res = res.data;\n        console.log(res.data);\n\n        if (_this2.res.code == 1) {\n          _this2.orLogin = true;\n        } else {\n          _this2.orLogin = false;\n        }\n\n        MessageBox({\n          title: \"提示\",\n          message: res.data.msg\n        });\n      });\n    },\n    //登录\n    gologin: function gologin() {\n      this.$router.push({\n        path: \"/home/users/login\"\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.vify_code();\n  },\n  watch: {\n    v_code: function v_code() {\n      if (this.v_code == this.v_code_num) {\n        this.v_code_text = \"√\";\n      } else {\n        this.v_code_text = \"x\";\n      }\n    }\n  }\n};",{"version":3,"sources":["register.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <mt-header fixed title=\"注册\" style=\"background:#00A076\">\r\n            <router-link to=\"/\" slot=\"left\">\r\n                <mt-button icon=\"back\">返回</mt-button>\r\n            </router-link>\r\n        </mt-header>\r\n        <div class=\"register-container\">\r\n            <div>\r\n                <input type=\"phone\" placeholder=\"请输入手机号码\" v-model=\"phone\">\r\n                <canvas id=\"vify\" @click=\"changeCode()\"></canvas>\r\n                <input type=\"text\" placeholder=\"请输入验证码\" class=\"my_input\" v-model=\"v_code\">\r\n                <span style=\"color:#fff\">{{v_code_text}}</span>\r\n                <input type=\"text\" placeholder=\"请输入用户名\" class=\"my_input\" v-model=\"uname\" @blur.prevent=\"blur_uname\">\r\n                <span style=\"font-size:10px;color:#fff\">{{isuname}}</span>\r\n                <input type=\"password\" placeholder=\"请输入密码\" class=\"my_input\" v-model=\"upwd\">\r\n                <mt-button type=\"default\" size=\"large\" @click=\"submit()\">立即注册</mt-button>\r\n                <span style=\"font-size:12px\">已有账号? <span style=\"text-decoration:underline\" @click=\"gologin()\">立即登录</span></span>\r\n                <mt-button style=\"margin-top:10px;\" type=\"default\" size=\"large\" @click=\"gologin()\" v-if=\"orLogin\">立即登录</mt-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import Qs from \"qs\"\r\n    import {\r\n        MessageBox\r\n    } from 'mint-ui';\r\n    export default {\r\n        data() {\r\n            return {\r\n                v_code: \"\",\r\n                v_code_num: \"\", //当前动态生成的验证码\r\n                v_code_text: \"\",\r\n                uname: \"\",\r\n                upwd: \"\",\r\n                phone: \"\",\r\n                isuname: \"\",\r\n                orLogin: false, //是否显示登录\r\n                res: \"\", //注册结果\r\n            }\r\n        },\r\n        methods: {\r\n            //返回指定范围随机数\r\n            rn(min, max) {\r\n                var n = parseInt(Math.random() * (max - min) + min);\r\n                return n;\r\n            },\r\n            //返回指定范围颜色\r\n            rc(mix, max) {\r\n                var r = this.rn(mix, max);\r\n                var g = this.rn(mix, max);\r\n                var b = this.rn(mix, max);\r\n                return `rgb(${r},${g},${b})`;\r\n            },\r\n            //生成验证码码\r\n            vify_code() {\r\n                var vify = document.getElementById(\"vify\");\r\n                var ctx = vify.getContext(\"2d\");\r\n                ctx.fillStyle = \"#fff\";\r\n                ctx.fillRect(0, 0, 320, 100);\r\n                //创建4个字符\r\n                var pool = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789\";\r\n                for (var i = 0; i < 4; i++) {\r\n                    var c = pool[this.rn(0, pool.length)];\r\n                    ctx.textBaseline = \"top\";\r\n                    ctx.font = \"100px SimHei\";\r\n                    ctx.fillStyle = this.rc(80, 180);\r\n                    ctx.fillText(c, i * 70, 4);\r\n                    // console.log(c)\r\n                    this.v_code_num += c;\r\n                }\r\n                //创建六条干扰线\r\n                for (var i = 0; i < 6; i++) {\r\n                    ctx.beginPath();\r\n                    ctx.strokeStyle = this.rc(0, 255);\r\n                    ctx.moveTo(this.rn(0, 280), this.rn(0, 80));\r\n                    ctx.lineTo(this.rn(0, 280), this.rn(0, 80));\r\n                    ctx.stroke();\r\n                }\r\n                //创建30个干扰点\r\n                for (var i = 0; i < 60; i++) {\r\n                    ctx.beginPath();\r\n                    ctx.fillStyle = this.rc(0, 255);\r\n                    ctx.arc(this.rn(0, 280), this.rn(0, 80), 3, 0, 2 * Math.PI);\r\n                    ctx.fill();\r\n                }\r\n\r\n            },\r\n            changeCode() {\r\n                this.v_code_num = [];\r\n                this.vify_code();\r\n            },\r\n            //用户名注册的时候失去焦点事件\r\n            blur_uname() {\r\n                this.$http.get(`users/verify?uname=${this.uname}`).then(res => {\r\n                    this.isuname = res.data;\r\n                    if (this.isuname.code == 1) {\r\n                        this.isuname = \"√\"\r\n                    } else {\r\n                        this.isuname = \"用户名已存在\"\r\n                    }\r\n                })\r\n            },\r\n            //注册\r\n            submit() {\r\n                console.log(this.uname)\r\n                this.$axios.post(\"users/register_phone\",\r\n                    Qs.stringify({\r\n                        uname: this.uname,\r\n                        upwd: this.upwd,\r\n                        phone: this.phone,\r\n                    })\r\n                ).then(res => {\r\n                    this.res = res.data;\r\n                    console.log(res.data)\r\n                    if (this.res.code == 1) {\r\n                        this.orLogin = true;\r\n                    } else {\r\n                        this.orLogin = false;\r\n                    }\r\n                    MessageBox({\r\n                        title: \"提示\",\r\n                        message: res.data.msg,\r\n                    })\r\n                })\r\n            },\r\n            //登录\r\n            gologin() {\r\n                this.$router.push({\r\n                    path: \"/home/users/login\"\r\n                })\r\n            }\r\n        },\r\n        mounted() {\r\n            this.vify_code()\r\n        },\r\n        watch: {\r\n            v_code() {\r\n                if (this.v_code == this.v_code_num) {\r\n                    this.v_code_text = \"√\";\r\n                } else {\r\n                    this.v_code_text = \"x\";\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    .register-container {\r\n        background-image: linear-gradient(180deg, #08B27F, #16B76A);\r\n        text-align: center;\r\n        position: relative;\r\n        min-height: 667px;\r\n    }\r\n\r\n    .register-container div:first-child {\r\n        list-style: none;\r\n        position: absolute;\r\n        left: 10%;\r\n        top: 5%;\r\n        width: 80%;\r\n        text-align: left;\r\n        margin-top: 5%;\r\n    }\r\n\r\n    [type=\"phone\"] {\r\n        margin-bottom: 5%;\r\n    }\r\n\r\n    #vify {\r\n        width: 110px;\r\n        height: 60px;\r\n        position: absolute;\r\n        top: 21%;\r\n        right: -6%;\r\n    }\r\n\r\n    input {\r\n        width: 100%;\r\n        height: 40px;\r\n        border-radius: 4px;\r\n        padding-left: 14px;\r\n        background: hsla(0, 0%, 100%, .2) !important;\r\n        z-index: 99;\r\n        color: #f5f5f5 !important;\r\n        font-size: 13px;\r\n        outline: 0;\r\n    }\r\n\r\n    .my_input {\r\n        width: 60%;\r\n    }\r\n</style>"],"sourceRoot":"src\\components\\user"}]}