{"remainingRequest":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\tabbar\\HomeShopCart.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\src\\components\\tabbar\\HomeShopCart.vue","mtime":1541948508022},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\babel-loader\\lib\\index.js","mtime":1540554614000},{"path":"C:\\Users\\alienware\\Desktop\\MyProject\\04_vue_cli_phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1540554614000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\alienware\\\\Desktop\\\\MyProject\\\\04_vue_cli_phone\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Qs from \"qs\";\nimport { Toast } from \"mint-ui\";\nimport { MessageBox } from \"mint-ui\";\nexport default {\n  inject: ['reload'],\n  data: function data() {\n    return {\n      products_res: \"\",\n      res_msg: \"\",\n      ifshow: false,\n      //当前提示消息是否显示\n      uname: \"\",\n      num: '',\n      isLogin_show: true //当前是否登录\n\n    };\n  },\n  methods: {\n    //跳转到当前产品的详情页\n    goDetails: function goDetails(tid) {\n      this.$router.push(\"/home/goodsinfo/\".concat(tid));\n    },\n    del: function del(tid, index) {\n      var _this = this;\n\n      MessageBox.confirm(\"确定要删除这个商品吗?\").then(function () {\n        _this.$axios.post(\"/collection/delete\", Qs.stringify({\n          tid: tid\n        })).then(function (res) {\n          if (res.data.code == 1) {\n            var msg = res.data.msg;\n            Toast({\n              message: msg,\n              duration: 1500\n            });\n          } else {\n            Toast({\n              message: res.data.msg,\n              duration: 1500\n            });\n          } //更新页面的状态\n\n\n          _this.$store.dispatch(\"saveForm\");\n\n          _this.reload();\n        });\n      }).catch(function (v) {\n        console.info(v);\n      });\n    },\n    //跳转登录页面\n    goLogin: function goLogin() {\n      this.$router.push({\n        path: \"/home/users/login\",\n        query: {\n          redirect: \"/home/shopcart\"\n        }\n      });\n    }\n  },\n  computed: {},\n  created: function created() {\n    (function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(self) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return self.$axios.get(\"/users/islogin\");\n\n              case 2:\n                res = _context.sent;\n\n                if (res.data.ok == 1) {\n                  self.isLogin = true;\n                  self.uname = res.data.uname;\n                  self.uid = res.data.uid; //关闭未登录的提示\n\n                  self.isLogin_show = false;\n                } else {\n                  self.isLogin = false;\n                } //2.查询当前用户的购物车\n\n\n                _context.next = 6;\n                return self.$axios.get(\"/collection/searchlist?uname=\".concat(self.uname));\n\n              case 6:\n                res = _context.sent;\n                self.products_res = res.data.data;\n                self.num = self.products_res.length;\n\n                if (res.data.code == -1) {\n                  self.ifshow = true;\n                  self.res_msg = res.data.msg;\n                } else {\n                  self.ifshow = false;\n                }\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    })()(this);\n  }\n};",{"version":3,"sources":["HomeShopCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAA,EAAA,MAAA,IAAA;AACA,SACA,KADA,QAEA,SAFA;AAGA,SACA,UADA,QAEA,SAFA;AAGA,eAAA;AACA,UAAA,CAAA,QAAA,CADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,oBAAA,EADA;AAEA,eAAA,EAFA;AAGA,cAAA,KAHA;AAGA;AACA,aAAA,EAJA;AAKA,WAAA,EALA;AAMA,oBAAA,IANA,CAMA;;AANA,KAAA;AAQA,GAXA;AAYA,WAAA;AACA;AACA,aAFA,qBAEA,GAFA,EAEA;AACA,WAAA,OAAA,CAAA,IAAA,2BAAA,GAAA;AACA,KAJA;AAKA,OALA,eAKA,GALA,EAKA,KALA,EAKA;AAAA;;AACA,iBAAA,OAAA,CAAA,aAAA,EAAA,IAAA,CAAA,YAAA;AACA,cAAA,MAAA,CAAA,IAAA,CAAA,oBAAA,EAAA,GAAA,SAAA,CAAA;AACA;AADA,SAAA,CAAA,EAEA,IAFA,CAEA,eAAA;AACA,cAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA,IAAA,IAAA,CAAA,GAAA;AACA,kBAAA;AACA,uBAAA,GADA;AAEA,wBAAA;AAFA,aAAA;AAIA,WANA,MAMA;AACA,kBAAA;AACA,uBAAA,IAAA,IAAA,CAAA,GADA;AAEA,wBAAA;AAFA,aAAA;AAIA,WAZA,CAaA;;;AACA,gBAAA,MAAA,CAAA,QAAA,CAAA,UAAA;;AACA,gBAAA,MAAA;AACA,SAlBA;AAmBA,OApBA,EAoBA,KApBA,CAoBA,aAAA;AACA,gBAAA,IAAA,CAAA,CAAA;AACA,OAtBA;AAuBA,KA7BA;AA8BA;AACA,WA/BA,qBA+BA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,cAAA,mBADA;AAEA,eAAA;AAAA,oBAAA;AAAA;AAFA,OAAA;AAIA;AApCA,GAZA;AAkDA,YAAA,EAlDA;AAoDA,SApDA,qBAoDA;AACA;AAAA;AAAA;AAAA,8BAAA,iBAAA,IAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,MAAA,CAAA,GAAA,CAAA,gBAAA,CAFA;;AAAA;AAEA,mBAFA;;AAGA,oBAAA,IAAA,IAAA,CAAA,EAAA,IAAA,CAAA,EAAA;AACA,uBAAA,OAAA,GAAA,IAAA;AACA,uBAAA,KAAA,GAAA,IAAA,IAAA,CAAA,KAAA;AACA,uBAAA,GAAA,GAAA,IAAA,IAAA,CAAA,GAAA,CAHA,CAIA;;AACA,uBAAA,YAAA,GAAA,KAAA;AACA,iBANA,MAMA;AACA,uBAAA,OAAA,GAAA,KAAA;AACA,iBAXA,CAYA;;;AAZA;AAAA,uBAaA,KAAA,MAAA,CAAA,GAAA,wCAAA,KAAA,KAAA,EAbA;;AAAA;AAaA,mBAbA;AAcA,qBAAA,YAAA,GAAA,IAAA,IAAA,CAAA,IAAA;AACA,qBAAA,GAAA,GAAA,KAAA,YAAA,CAAA,MAAA;;AACA,oBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,CAAA,EAAA;AACA,uBAAA,MAAA,GAAA,IAAA;AACA,uBAAA,OAAA,GAAA,IAAA,IAAA,CAAA,GAAA;AACA,iBAHA,MAGA;AACA,uBAAA,MAAA,GAAA,KAAA;AACA;;AArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;AAAA,SAsBA,IAtBA;AAuBA;AA5EA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"mui-card\">\n      <div class=\"mui-card-header\" v-for=\"(item,i) in products_res\" :key=\"i\" @click=\"goDetails(item.tid)\">\n        <div class=\"cart_info\">\n          <div style=\"width:100%;\">\n            <h5>{{item.title |ellipse(40)}}</h5>\n            <h6 class=\"price\">{{item.price}}</h6>\n             <mt-button size=\"small\" type=\"danger\" @click=\"del(item.tid,i)\" style=\"margin-left:75%;\">删除</mt-button>\n          </div>\n          <div class=\"img_container\" style=\"padding-left:5%;\">\n            <img v-lazy=\"item.md_pic\" style=\"width:108px;\">\n          </div>\n        </div>\n      </div>\n      <div class=\"mui-card-footer\"><span>总共有{{num}}件</span> </div>\n      <div class=\"mui-card-footer\" v-if=\"isLogin_show\"><span style=\"font-size:15px;font-weight:600\">当前还没有登录,请登录后再看您的宝贝哦,点击下方按钮登录!!</span> \n      </div>\n      <mt-button v-if=\"isLogin_show\" type=\"primary\" size=\"large\" @click=\"goLogin()\">登录</mt-button>\n    </div>\n  </div>\n</template>\n<script>\n  import Qs from \"qs\";\n  import {\n    Toast\n  } from \"mint-ui\";\n  import {\n    MessageBox\n  } from \"mint-ui\";\n  export default {\n    inject: ['reload'],\n    data() {\n      return {\n        products_res: \"\",\n        res_msg: \"\",\n        ifshow: false, //当前提示消息是否显示\n        uname: \"\",\n        num: '',\n        isLogin_show:true //当前是否登录\n      };\n    },\n    methods: {\n      //跳转到当前产品的详情页\n      goDetails(tid) {\n        this.$router.push(`/home/goodsinfo/${tid}`);\n      },\n      del(tid, index) {\n        MessageBox.confirm(\"确定要删除这个商品吗?\").then(() => {\n          this.$axios.post(\"/collection/delete\", Qs.stringify({\n            tid\n          })).then(res => {\n            if (res.data.code == 1) {\n              var msg = res.data.msg;\n              Toast({\n                message: msg,\n                duration: 1500\n              })\n            } else {\n              Toast({\n                message: res.data.msg,\n                duration: 1500\n              })\n            }\n            //更新页面的状态\n            this.$store.dispatch(\"saveForm\")\n            this.reload();\n          })\n        }).catch(v => {\n          console.info(v);\n        })\n      },\n      //跳转登录页面\n      goLogin() {\n        this.$router.push({\n          path:\"/home/users/login\",\n          query:{redirect:\"/home/shopcart\"}\n        })\n      }\n    },\n    computed: {\n    },\n    created() {\n      (async function (self) {\n        //1.判断用户是否登录\n         var res = await self.$axios.get(\"/users/islogin\")\n        if (res.data.ok == 1) {\n          self.isLogin = true;\n          self.uname = res.data.uname;\n          self.uid = res.data.uid;\n          //关闭未登录的提示\n          self.isLogin_show = false;\n        } else {\n          self.isLogin = false;\n        }\n        //2.查询当前用户的购物车\n        var res = await self.$axios.get(`/collection/searchlist?uname=${self.uname}`)\n          self.products_res = res.data.data;\n         self.num = self.products_res.length;\n          if (res.data.code == -1) {\n            self.ifshow = true;\n            self.res_msg = res.data.msg;\n          } else {\n            self.ifshow = false;\n          }\n      })(this)\n    }\n  };\n</script>\n<style scoped>\n  .cart_info {\n    width: 355px;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  .cart_info .price {\n    color: #ff7363;\n    font-weight: 600;\n  }\n\n  .img_container{\n     width:190px;\n     height:80px;\n  }\n  .img_container img{\n    width:100%;\n    height:80px;\n  }\n</style>"],"sourceRoot":"src\\components\\tabbar"}]}